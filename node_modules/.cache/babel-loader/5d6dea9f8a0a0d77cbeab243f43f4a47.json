{"ast":null,"code":"import { createContext, useMemo, createElement, useRef, useEffect, useCallback, useContext, useReducer, useState } from 'react';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n} ////////////////////////////////////////////////////////\n\n\nvar invocationTimestamps = new Map(); ////////////////////////////////////////////////////////\n\nvar recordsCache = new Map();\nvar records = {\n  clear: function clear(opts) {\n    recordsCache.clear();\n\n    if (opts && opts.cacheProvider) {\n      opts.cacheProvider.clear();\n    }\n\n    return;\n  },\n  delete: function _delete(key, opts) {\n    recordsCache.delete(key);\n\n    if (opts && opts.cacheProvider) {\n      opts.cacheProvider.delete(key);\n    }\n\n    return;\n  },\n  set: function set(key, valOrFn, opts) {\n    var record = recordsCache.get(key);\n\n    if (record && record.cacheTimeout) {\n      clearTimeout(record.cacheTimeout);\n    }\n\n    var val = valOrFn;\n\n    if (typeof val === 'function') {\n      val = val(record || {});\n    }\n\n    var cacheTimeout;\n\n    if (opts && opts.cacheTime) {\n      cacheTimeout = setTimeout(function () {\n        records.delete(key);\n      }, opts.cacheTime);\n    } // Set an updated timestamp on the cached record\n\n\n    val = _objectSpread({}, val, {\n      cacheTimeout: cacheTimeout,\n      updated: new Date()\n    });\n    recordsCache.set(key, val);\n\n    if (opts && opts.cacheProvider) {\n      opts.cacheProvider.set(key, val);\n    }\n\n    return;\n  },\n  get: function get(key, opts) {\n    // First, check to see if the record exists in the cache.\n    var record = recordsCache.get(key);\n\n    if (record) {\n      return record;\n    } // Otherwise, fallback to the cache provider.\n\n\n    if (opts && opts.cacheProvider) {\n      var value = opts.cacheProvider.get(key);\n\n      if (value) {\n        return value;\n      }\n    }\n\n    return undefined;\n  }\n}; ////////////////////////////////////////////////////////\n\nvar promises = new Map();\nvar revalidators = new Map();\nvar suspenders = new Map();\nvar updaters = new Map();\nvar cache = /*#__PURE__*/Object.freeze({\n  invocationTimestamps: invocationTimestamps,\n  records: records,\n  promises: promises,\n  revalidators: revalidators,\n  suspenders: suspenders,\n  updaters: updaters\n});\nvar CACHE_STRATEGIES = {\n  CONTEXT_ONLY: 'context-only',\n  CONTEXT_AND_VARIABLES: 'context-and-variables'\n};\nvar LOAD_POLICIES = {\n  CACHE_FIRST: 'cache-first',\n  CACHE_AND_LOAD: 'cache-and-load',\n  LOAD_ONLY: 'load-only',\n  CACHE_ONLY: 'cache-only'\n};\nvar STATES = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  PENDING_SLOW: 'pending-slow',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n  RELOADING: 'reloading',\n  RELOADING_SLOW: 'reloading-slow'\n};\nvar defaultConfig = {\n  cacheTime: 0,\n  cacheStrategy: CACHE_STRATEGIES.CONTEXT_AND_VARIABLES,\n  debounce: 0,\n  debounceCache: true,\n  dedupingInterval: 500,\n  delay: 0,\n  defer: false,\n  loadPolicy: LOAD_POLICIES.CACHE_AND_LOAD,\n  revalidateOnWindowFocus: false,\n  revalidateTime: 300000,\n  suspense: false,\n  throwError: false,\n  timeout: 5000\n};\nvar Context = createContext(defaultConfig);\n\nfunction Provider(_ref) {\n  var children = _ref.children,\n      config = _ref.config;\n  var newConfig = useMemo(function () {\n    return Object.assign(defaultConfig, config);\n  }, [config]);\n  return createElement(Context.Provider, {\n    value: newConfig\n  }, children);\n}\n\nfunction useDetectMounted() {\n  var hasMounted = useRef(true);\n  var hasRendered = useRef(false);\n  useEffect(function () {\n    hasRendered.current = true;\n    return function cleanup() {\n      hasMounted.current = false;\n    };\n  }, []);\n  return [hasMounted, hasRendered];\n}\n\nvar noop = function noop() {};\n\nfunction useInterval(callback, delay) {\n  var savedCallback = useRef(noop);\n  useEffect(function () {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(function () {\n    var handler = function handler() {\n      return savedCallback.current.apply(savedCallback, arguments);\n    };\n\n    if (typeof delay === 'number') {\n      var id = setInterval(handler, delay);\n      return function () {\n        return clearInterval(id);\n      };\n    }\n\n    return;\n  }, [delay]);\n}\n\nfunction usePrevious(value) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\nfunction useTimeout() {\n  var timeout = useRef(undefined);\n\n  var _setTimeout = useCallback(function (fn, ms) {\n    // @ts-ignore\n    timeout.current = setTimeout(fn, ms);\n  }, []);\n\n  var _clearTimeout = useCallback(function () {\n    return clearTimeout(timeout.current);\n  }, []);\n\n  useEffect(function () {\n    return function cleanup() {\n      if (timeout) {\n        clearTimeout(timeout.current);\n      }\n    };\n  }, []);\n  return [_setTimeout, _clearTimeout];\n}\n\nfunction isDocumentVisible() {\n  if (typeof document !== 'undefined' && typeof document.visibilityState !== 'undefined') {\n    return document.visibilityState !== 'hidden';\n  }\n\n  return true;\n}\n\nfunction isOnline() {\n  if (typeof navigator.onLine !== 'undefined') {\n    return navigator.onLine;\n  }\n\n  return true;\n}\n\nfunction getCacheKey(_ref) {\n  var context = _ref.context,\n      variablesHash = _ref.variablesHash,\n      cacheStrategy = _ref.cacheStrategy;\n  var cacheKey = Array.isArray(context) ? context.join('.') : context;\n\n  if (variablesHash && cacheStrategy === CACHE_STRATEGIES.CONTEXT_AND_VARIABLES) {\n    cacheKey = \"\".concat(cacheKey, \".\").concat(variablesHash);\n  }\n\n  return cacheKey;\n}\n\nfunction broadcastChanges(cacheKey, record) {\n  var updaters$$1 = updaters.get(cacheKey);\n\n  if (updaters$$1) {\n    updaters$$1.forEach(function (updater) {\n      return updater({\n        record: record,\n        shouldBroadcast: false\n      });\n    });\n  }\n}\n\nvar IDLE_RECORD = {\n  error: undefined,\n  response: undefined,\n  state: STATES.IDLE\n};\n\nfunction useLoads(context, fn, localConfig) {\n  var globalConfig = useContext(Context);\n\n  var config = _objectSpread({}, globalConfig, localConfig || {});\n\n  var cacheProvider = config.cacheProvider,\n      cacheStrategy = config.cacheStrategy,\n      cacheTime = config.cacheTime,\n      debounce = config.debounce,\n      debounceCache = config.debounceCache,\n      dedupingInterval = config.dedupingInterval,\n      dedupeManualLoad = config.dedupeManualLoad,\n      delay = config.delay,\n      _initialResponse = config.initialResponse,\n      loadPolicy = config.loadPolicy,\n      onReject = config.onReject,\n      onResolve = config.onResolve,\n      pollingInterval = config.pollingInterval,\n      pollWhile = config.pollWhile,\n      pollWhenHidden = config.pollWhenHidden,\n      rejectRetryInterval = config.rejectRetryInterval,\n      revalidateOnWindowFocus = config.revalidateOnWindowFocus,\n      revalidateTime = config.revalidateTime,\n      suspense = config.suspense,\n      throwError = config.throwError,\n      timeout = config.timeout,\n      updateFn = config.update;\n  var defer = config.defer;\n  var variables = config.variables;\n\n  if (typeof variables === 'function') {\n    try {\n      variables = variables();\n      defer = config.defer;\n    } catch (err) {\n      defer = true;\n    }\n  }\n\n  var variablesHash = useMemo(function () {\n    return JSON.stringify(variables);\n  }, [variables]);\n  var cacheKey = getCacheKey({\n    context: context,\n    variablesHash: variablesHash,\n    cacheStrategy: cacheStrategy\n  });\n  var loadCount = useRef(0);\n  var debounceCount = useRef(0);\n  var prevCacheKey = usePrevious(cacheKey);\n  var isSameContext = !prevCacheKey || prevCacheKey === cacheKey;\n  var prevVariablesHash = usePrevious(JSON.stringify(variables));\n  var isSameVariables = variablesHash === prevVariablesHash;\n\n  var _useDetectMounted = useDetectMounted(),\n      _useDetectMounted2 = _slicedToArray(_useDetectMounted, 2),\n      hasMounted = _useDetectMounted2[0],\n      hasRendered = _useDetectMounted2[1];\n\n  var _useTimeout = useTimeout(),\n      _useTimeout2 = _slicedToArray(_useTimeout, 2),\n      setDelayTimeout = _useTimeout2[0],\n      clearDelayTimeout = _useTimeout2[1];\n\n  var _useTimeout3 = useTimeout(),\n      _useTimeout4 = _slicedToArray(_useTimeout3, 1),\n      setErrorRetryTimeout = _useTimeout4[0];\n\n  var _useTimeout5 = useTimeout(),\n      _useTimeout6 = _slicedToArray(_useTimeout5, 2),\n      setTimeoutTimeout = _useTimeout6[0],\n      clearTimeoutTimeout = _useTimeout6[1];\n\n  var cachedRecord = useMemo(function () {\n    if (cacheKey && loadPolicy !== LOAD_POLICIES.LOAD_ONLY) {\n      return records.get(cacheKey, {\n        cacheProvider: cacheProvider\n      });\n    }\n\n    return;\n  }, [cacheProvider, cacheKey, loadPolicy]);\n  var initialResponse = useMemo(function () {\n    return _initialResponse;\n  }, []); // eslint-disable-line\n\n  var initialRecord = initialResponse ? {\n    response: initialResponse,\n    error: undefined,\n    state: STATES.RESOLVED\n  } : _objectSpread({}, IDLE_RECORD, {\n    state: defer ? STATES.IDLE : STATES.PENDING\n  });\n\n  if (cachedRecord && !defer) {\n    initialRecord = cachedRecord;\n  }\n\n  var reducer = useCallback(function (state, action) {\n    switch (action.type) {\n      case STATES.IDLE:\n        return IDLE_RECORD;\n\n      case STATES.PENDING:\n        return _objectSpread({}, state, {\n          state: STATES.PENDING\n        });\n\n      case STATES.PENDING_SLOW:\n        return _objectSpread({}, state, {\n          state: STATES.PENDING_SLOW\n        });\n\n      case STATES.RESOLVED:\n        return {\n          isCached: action.isCached,\n          error: undefined,\n          response: action.response,\n          state: STATES.RESOLVED\n        };\n\n      case STATES.REJECTED:\n        return {\n          isCached: action.isCached,\n          error: action.error,\n          response: undefined,\n          state: STATES.REJECTED\n        };\n\n      case STATES.RELOADING:\n        return _objectSpread({}, state, {\n          state: STATES.RELOADING\n        });\n\n      case STATES.RELOADING_SLOW:\n        return _objectSpread({}, state, {\n          state: STATES.RELOADING_SLOW\n        });\n\n      default:\n        return state;\n    }\n  }, []);\n\n  var _React$useReducer = useReducer(reducer, initialRecord),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      record = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  var handleLoading = useCallback(function (_ref) {\n    var isReloading = _ref.isReloading,\n        isSlow = _ref.isSlow,\n        promise = _ref.promise;\n    var reloadingState = isSlow ? STATES.RELOADING_SLOW : STATES.RELOADING;\n    var pendingState = isSlow ? STATES.PENDING_SLOW : STATES.PENDING;\n    dispatch({\n      type: isReloading ? reloadingState : pendingState\n    });\n\n    if (cacheKey) {\n      records.set(cacheKey, function (record) {\n        return _objectSpread({}, record, {\n          state: isReloading ? STATES.RELOADING : STATES.PENDING\n        });\n      }, {\n        cacheTime: cacheTime,\n        cacheProvider: cacheProvider\n      });\n\n      if (!isReloading) {\n        promises.set(cacheKey, promise);\n      }\n    }\n  }, [cacheProvider, cacheTime, cacheKey]);\n  var handleData = useCallback(function (_ref2) {\n    var count = _ref2.count,\n        record = _ref2.record,\n        shouldBroadcast = _ref2.shouldBroadcast;\n\n    if (hasMounted.current && (!count || count === loadCount.current)) {\n      // @ts-ignore\n      clearDelayTimeout(); // @ts-ignore\n\n      clearTimeoutTimeout();\n      dispatch(_objectSpread({\n        type: record.state,\n        isCached: Boolean(cacheKey)\n      }, record));\n\n      if (cacheKey) {\n        records.set(cacheKey, record, {\n          cacheProvider: cacheProvider,\n          cacheTime: cacheTime\n        });\n        var isSuspended = suspenders.get(cacheKey);\n        suspenders.set(cacheKey, typeof isSuspended === 'undefined');\n        promises.delete(cacheKey);\n\n        if (shouldBroadcast) {\n          broadcastChanges(cacheKey, record);\n        }\n      }\n    }\n  }, [cacheProvider, cacheTime, clearDelayTimeout, clearTimeoutTimeout, cacheKey, hasMounted]);\n  var handleOptimisticData = useCallback(function (_ref3, state, count) {\n    var data = _ref3.data,\n        contextOrCallback = _ref3.contextOrCallback,\n        callback = _ref3.callback;\n    var newData = data;\n    var optimisticCacheKey = cacheKey;\n\n    if (_typeof(contextOrCallback) === 'object') {\n      var _variablesHash = JSON.stringify(contextOrCallback.variables);\n\n      optimisticCacheKey = getCacheKey({\n        context: contextOrCallback.context,\n        variablesHash: _variablesHash,\n        cacheStrategy: cacheStrategy\n      });\n    }\n\n    if (typeof data === 'function') {\n      var cachedValue = IDLE_RECORD;\n\n      if (optimisticCacheKey) {\n        cachedValue = records.get(optimisticCacheKey, {\n          cacheProvider: cacheProvider\n        }) || IDLE_RECORD;\n      }\n\n      newData = data(state === STATES.RESOLVED ? cachedValue.response : cachedValue.error);\n    }\n\n    var newRecord = {\n      error: state === STATES.REJECTED ? newData : undefined,\n      response: state === STATES.RESOLVED ? newData : undefined,\n      state: state\n    };\n\n    if (!optimisticCacheKey || cacheKey === optimisticCacheKey) {\n      handleData({\n        count: count,\n        record: newRecord,\n        shouldBroadcast: true\n      });\n    } else {\n      records.set(optimisticCacheKey, newRecord, {\n        cacheProvider: cacheProvider,\n        cacheTime: cacheTime\n      });\n    }\n\n    var newCallback = typeof contextOrCallback === 'function' ? contextOrCallback : callback;\n    newCallback && newCallback(newData);\n  }, [cacheStrategy, cacheKey, cacheProvider, handleData, cacheTime]);\n  var load = useCallback(function () {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function () {\n      for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n        _args[_key] = arguments[_key];\n      }\n\n      var _opts$setInvocationTi = opts.setInvocationTimestamp,\n          setInvocationTimestamp = _opts$setInvocationTi === void 0 ? true : _opts$setInvocationTi;\n\n      if (!opts.isManualInvoke && variables && isSameVariables) {\n        return;\n      } // Build cacheKey based of these args?\n\n\n      var args = _args.filter(function (arg) {\n        return arg.constructor.name !== 'Class';\n      });\n\n      if (variables && (!args || args.length === 0)) {\n        args = variables;\n      }\n\n      if (context && debounce > 0) {\n        var now = new Date().getTime();\n\n        if (setInvocationTimestamp) {\n          invocationTimestamps.set(context, now);\n          invocationTimestamps.set('latest', now);\n        }\n\n        var latestInvocationTimestamp = invocationTimestamps.get(context || 'latest');\n\n        if (latestInvocationTimestamp) {\n          if (Math.abs(now - latestInvocationTimestamp) < debounce) {\n            debounceCount.current = debounceCount.current + 1;\n            setTimeout(function () {\n              return load(_objectSpread({\n                count: debounceCount.current,\n                setInvocationTimestamp: false\n              }, opts)).apply(void 0, _args);\n            }, debounce);\n            return;\n          }\n\n          if (debounceCount.current !== (opts.count || 0)) {\n            return;\n          }\n        }\n\n        debounceCount.current = 0;\n      }\n\n      var cachedRecord;\n\n      if (cacheKey) {\n        cachedRecord = records.get(cacheKey, {\n          cacheProvider: cacheProvider\n        });\n      }\n\n      if (cachedRecord) {\n        var isDuplicate = // @ts-ignore\n        Math.abs(new Date() - cachedRecord.updated) < dedupingInterval && (!opts.isManualInvoke || dedupeManualLoad);\n        if (isDuplicate) return;\n      }\n\n      loadCount.current = loadCount.current + 1;\n      var count = loadCount.current;\n\n      if (cacheKey) {\n        var isSuspended = suspenders.get(cacheKey);\n\n        if (suspense && isSuspended) {\n          suspenders.set(cacheKey, false);\n          return;\n        }\n      }\n\n      if (cacheKey && loadPolicy !== LOAD_POLICIES.LOAD_ONLY) {\n        if (!defer && cachedRecord) {\n          dispatch(_objectSpread({\n            type: cachedRecord.state,\n            isCached: true\n          }, cachedRecord));\n\n          if (cachedRecord.state === STATES.RESOLVED || cachedRecord.state === STATES.REJECTED) {\n            // @ts-ignore\n            var isStale = Math.abs(new Date() - cachedRecord.updated) >= revalidateTime;\n            var isCachedWithCacheFirst = !isStale && !opts.isManualInvoke && loadPolicy === LOAD_POLICIES.CACHE_FIRST;\n            if (isCachedWithCacheFirst) return;\n          }\n        }\n      }\n\n      var loadFn = opts.fn ? opts.fn : fn;\n      var promiseOrFn = loadFn.apply(void 0, _toConsumableArray(args));\n      var promise = promiseOrFn;\n\n      if (typeof promiseOrFn === 'function') {\n        promise = promiseOrFn({\n          cachedRecord: cachedRecord,\n          setResponse: function setResponse(data, contextOrCallback, callback) {\n            return handleOptimisticData({\n              data: data,\n              contextOrCallback: contextOrCallback,\n              callback: callback\n            }, STATES.RESOLVED, count);\n          },\n          setError: function setError(data, contextOrCallback, callback) {\n            return handleOptimisticData({\n              data: data,\n              contextOrCallback: contextOrCallback,\n              callback: callback\n            }, STATES.REJECTED, count);\n          }\n        });\n      }\n\n      var isReloading = context && isSameContext && (count > 1 || cachedRecord && !defer || initialResponse) || debounce > 0 && debounceCache;\n\n      if (delay > 0) {\n        setDelayTimeout(function () {\n          return handleLoading({\n            isReloading: isReloading,\n            promise: promise\n          });\n        }, delay);\n      } else {\n        handleLoading({\n          isReloading: isReloading,\n          promise: promise\n        });\n      }\n\n      if (timeout > 0) {\n        setTimeoutTimeout(function () {\n          return handleLoading({\n            isReloading: isReloading,\n            isSlow: true,\n            promise: promise\n          });\n        }, timeout);\n      }\n\n      if (typeof promise === 'function') return;\n      return promise.then(function (response) {\n        handleData({\n          count: count,\n          record: {\n            error: undefined,\n            response: response,\n            state: STATES.RESOLVED\n          },\n          shouldBroadcast: true\n        });\n        onResolve && onResolve(response);\n        return response;\n      }).catch(function (error) {\n        handleData({\n          count: count,\n          record: {\n            response: undefined,\n            error: error,\n            state: STATES.REJECTED\n          },\n          shouldBroadcast: false\n        });\n        onReject && onReject(error);\n\n        if (rejectRetryInterval) {\n          var _count = Math.min(loadCount.current || 0, 8);\n\n          var _timeout = typeof rejectRetryInterval === 'function' ? rejectRetryInterval(_count) : ~~((Math.random() + 0.5) * (1 << _count)) * rejectRetryInterval;\n\n          setErrorRetryTimeout(function () {\n            return load()(args);\n          }, _timeout);\n        }\n\n        if (throwError && !suspense) {\n          throw error;\n        }\n      });\n    };\n  }, [variablesHash, isSameVariables, context, debounce, cacheKey, loadPolicy, fn, isSameContext, defer, initialResponse, debounceCache, delay, timeout, cacheProvider, dedupingInterval, dedupeManualLoad, suspense, revalidateTime, handleOptimisticData, setDelayTimeout, handleLoading, setTimeoutTimeout, handleData, onResolve, onReject, rejectRetryInterval, throwError, setErrorRetryTimeout]);\n  var update = useMemo(function () {\n    if (!updateFn) return;\n\n    if (Array.isArray(updateFn)) {\n      return updateFn.map(function (fn) {\n        return load({\n          fn: fn,\n          isManualInvoke: true\n        });\n      });\n    }\n\n    return load({\n      fn: updateFn,\n      isManualInvoke: true\n    });\n  }, [load, updateFn]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: STATES.IDLE\n    });\n  }, []);\n  useEffect(function () {\n    if (!cachedRecord && cacheKey && !initialResponse && !debounceCache) {\n      reset();\n    }\n  }, [cachedRecord, cacheKey, initialResponse, reset, debounceCache]);\n  useEffect(function () {\n    if (cachedRecord && !defer && loadPolicy !== LOAD_POLICIES.LOAD_ONLY) {\n      dispatch(_objectSpread({\n        type: cachedRecord.state,\n        isCached: true\n      }, cachedRecord));\n    }\n  }, [cachedRecord, loadPolicy, dispatch, defer]);\n  useEffect(function () {\n    if (defer || suspense && !hasRendered.current && !cachedRecord || loadPolicy === LOAD_POLICIES.CACHE_ONLY) return;\n    load()();\n  }, [defer, cacheKey, suspense, hasRendered, cachedRecord, load, loadPolicy]);\n  useEffect(function () {\n    if (defer) return;\n    var updaters$$1 = updaters.get(cacheKey);\n\n    if (updaters$$1) {\n      var newUpdaters = [].concat(_toConsumableArray(updaters$$1), [handleData]);\n      updaters.set(cacheKey, newUpdaters);\n    } else {\n      updaters.set(cacheKey, [handleData]);\n    }\n\n    return function cleanup() {\n      var updaters$$1 = updaters.get(cacheKey);\n      var newUpdaters = updaters$$1.filter(function (updater) {\n        return updater !== handleData;\n      });\n      updaters.set(cacheKey, newUpdaters);\n    };\n  }, [cacheKey, defer, handleData]);\n  useEffect(function () {\n    if (!revalidateOnWindowFocus || defer) return;\n    var revalidate = load();\n    revalidators.set(cacheKey, revalidate);\n    return function cleanup() {\n      revalidators.delete(cacheKey);\n    };\n  }, [cacheKey, defer, handleData, load, revalidateOnWindowFocus]);\n  var shouldPoll = !defer;\n\n  if (shouldPoll && pollWhile) {\n    if (typeof pollWhile === 'function') {\n      shouldPoll = pollWhile(record);\n    } else {\n      shouldPoll = pollWhile;\n    }\n  }\n\n  useInterval(function () {\n    if (!isDocumentVisible() && !pollWhenHidden) return;\n    load({\n      isManualInvoke: true\n    })();\n  }, shouldPoll ? pollingInterval : undefined);\n  var states = useMemo(function () {\n    return {\n      isIdle: record.state === STATES.IDLE && Boolean(!record.response),\n      isPending: record.state === STATES.PENDING || record.state === STATES.PENDING_SLOW,\n      isPendingSlow: record.state === STATES.PENDING_SLOW,\n      isResolved: record.state === STATES.RESOLVED || Boolean(record.response),\n      isRejected: record.state === STATES.REJECTED,\n      isReloading: record.state === STATES.RELOADING || record.state === STATES.RELOADING_SLOW,\n      isReloadingSlow: record.state === STATES.RELOADING_SLOW\n    };\n  }, [record.response, record.state]);\n\n  if (suspense && !defer) {\n    if (cacheKey) {\n      var _record = records.get(cacheKey);\n\n      var promise = promises.get(cacheKey);\n\n      if (_record && promise) {\n        throw promise;\n      }\n\n      if (!_record) {\n        load()();\n      }\n    }\n\n    if (states.isRejected) {\n      throw record.error;\n    }\n  }\n\n  return useMemo(function () {\n    return _objectSpread({\n      load: load({\n        isManualInvoke: true\n      }),\n      update: update,\n      reset: reset,\n      response: record.response,\n      error: record.error,\n      state: record.state\n    }, states, {\n      isCached: Boolean(record.isCached)\n    });\n  }, [load, update, reset, record.response, record.error, record.state, record.isCached, states]);\n}\n\nvar eventsBinded = false;\n\nif (typeof window !== 'undefined' && window.addEventListener && !eventsBinded) {\n  var revalidate = function revalidate() {\n    if (!isDocumentVisible() || !isOnline()) return;\n    revalidators.forEach(function (revalidator) {\n      return revalidator && revalidator();\n    });\n  };\n\n  window.addEventListener('visibilitychange', revalidate, false);\n  window.addEventListener('focus', revalidate, false);\n  eventsBinded = true;\n}\n\nfunction preload(context, promiseOrFn, localConfig) {\n  var config = _objectSpread({}, defaultConfig, localConfig || {});\n\n  var cacheTime = config.cacheTime,\n      cacheProvider = config.cacheProvider,\n      cacheStrategy = config.cacheStrategy,\n      dedupingInterval = config.dedupingInterval,\n      loadPolicy = config.loadPolicy,\n      onResolve = config.onResolve,\n      onReject = config.onReject,\n      rejectRetryInterval = config.rejectRetryInterval,\n      revalidateTime = config.revalidateTime,\n      suspense = config.suspense,\n      throwError = config.throwError,\n      variables = config.variables;\n\n  function setData(_ref) {\n    var cacheKey = _ref.cacheKey,\n        record = _ref.record;\n    var config = {\n      cacheProvider: cacheProvider,\n      cacheTime: cacheTime\n    };\n    records.set(cacheKey, record, config);\n  }\n\n  var count = 0;\n\n  function load() {\n    count = count + 1;\n    var args = variables || [];\n\n    if (typeof args === 'function') {\n      try {\n        args = args() || [];\n      } catch (err) {\n        throw new Error('TODO');\n      }\n    }\n\n    var variablesHash = JSON.stringify(args);\n    var cacheKey = getCacheKey({\n      context: context,\n      variablesHash: variablesHash,\n      cacheStrategy: cacheStrategy\n    });\n    if (!cacheKey) throw new Error('preload() must have a context');\n    var cachedRecord;\n\n    if (loadPolicy !== LOAD_POLICIES.LOAD_ONLY) {\n      cachedRecord = records.get(cacheKey);\n    }\n\n    if (cachedRecord) {\n      // @ts-ignore\n      var isStale = Math.abs(new Date() - cachedRecord.updated) >= revalidateTime;\n      var isDuplicate = // @ts-ignore\n      Math.abs(new Date() - cachedRecord.updated) < dedupingInterval;\n      var isCachedWithCacheFirst = !isStale && loadPolicy === LOAD_POLICIES.CACHE_FIRST;\n      if (isDuplicate || isCachedWithCacheFirst) return;\n    }\n\n    var promise = promiseOrFn.apply(void 0, _toConsumableArray(args));\n\n    if (typeof promise === 'function') {\n      promise = promise({\n        cachedRecord: cachedRecord\n      });\n    }\n\n    var isReloading = Boolean(cachedRecord);\n    records.set(cacheKey, function (record) {\n      return _objectSpread({}, record, {\n        state: cachedRecord ? STATES.RELOADING : STATES.PENDING\n      });\n    }, {\n      cacheTime: cacheTime,\n      cacheProvider: cacheProvider\n    });\n\n    if (!isReloading) {\n      promises.set(cacheKey, promise);\n    }\n\n    if (typeof promise === 'function') return;\n    promise.then(function (response) {\n      var record = {\n        error: undefined,\n        response: response,\n        state: STATES.RESOLVED\n      };\n      setData({\n        cacheKey: cacheKey,\n        record: record\n      });\n      onResolve && onResolve(response);\n    }).catch(function (error) {\n      var record = {\n        response: undefined,\n        error: error,\n        state: STATES.REJECTED\n      };\n      setData({\n        cacheKey: cacheKey,\n        record: record\n      });\n      onReject && onReject(error);\n\n      if (rejectRetryInterval) {\n        var attemptCount = Math.min(count || 0, 8);\n        var timeout = typeof rejectRetryInterval === 'function' ? rejectRetryInterval(attemptCount) : ~~((Math.random() + 0.5) * (1 << attemptCount)) * rejectRetryInterval;\n        setTimeout(function () {\n          return load();\n        }, timeout);\n      }\n\n      if (throwError && !suspense) {\n        throw error;\n      }\n    }).finally(function () {\n      promises.delete(cacheKey);\n    });\n  }\n\n  load();\n  return {\n    useLoads: function useLoads$$1() {\n      var loadsConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return useLoads(context, promiseOrFn, _objectSpread({}, config, loadsConfig, {\n        loadPolicy: LOAD_POLICIES.CACHE_ONLY\n      }));\n    }\n  };\n}\n\nfunction useDeferredLoads(contextOrFn, fnOrConfig, maybeConfig) {\n  var context = contextOrFn;\n  var config = maybeConfig;\n  var fn = fnOrConfig;\n\n  if (typeof contextOrFn === 'function') {\n    context = null;\n    fn = contextOrFn;\n  }\n\n  if (_typeof(fnOrConfig) === 'object') {\n    config = fnOrConfig;\n  }\n\n  return useLoads(context, fn, _objectSpread({}, config, {\n    defer: true\n  }));\n}\n\nfunction createLoadsHooks(opts) {\n  return Object.entries(opts).reduce(function (currentLoaders, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        loadKey = _ref2[0],\n        val = _ref2[1];\n\n    if (loadKey[0] === '_' || typeof val === 'string') return currentLoaders;\n    var loader = val;\n    var config = {};\n\n    if (Array.isArray(val)) {\n      loader = val[0];\n      config = val[1] || {};\n    }\n\n    if (loadKey === 'fn') {\n      return _objectSpread({}, currentLoaders, {\n        preload: function preload$$1(loadsConfig) {\n          return preload(opts.context, loader, _objectSpread({}, config, loadsConfig));\n        },\n        useLoads: function useLoads$$1(loadsConfig) {\n          return useLoads(opts.context, loader, _objectSpread({}, config, loadsConfig));\n        },\n        useDeferredLoads: function useDeferredLoads$$1(loadsConfig) {\n          return useDeferredLoads(opts.context, loader, _objectSpread({}, config, loadsConfig));\n        }\n      });\n    }\n\n    return _objectSpread({}, currentLoaders, _defineProperty({}, loadKey, {\n      preload: function preload$$1(loadsConfig) {\n        return preload(opts.context, loader, _objectSpread({}, config, loadsConfig));\n      },\n      useLoads: function useLoads$$1(loadsConfig) {\n        return useLoads(opts.context, loader, _objectSpread({}, config, loadsConfig));\n      },\n      useDeferredLoads: function useDeferredLoads$$1(loadsConfig) {\n        return useDeferredLoads(opts.context, loader, _objectSpread({}, config, loadsConfig));\n      }\n    }));\n  }, {});\n}\n\nfunction createResource(opts) {\n  return _objectSpread({}, createLoadsHooks(opts));\n}\n\nvar Loads = function Loads(_ref) {\n  var children = _ref.children,\n      context = _ref.context,\n      fn = _ref.fn,\n      inputs = _ref.inputs,\n      config = _objectWithoutProperties(_ref, [\"children\", \"context\", \"fn\", \"inputs\"]);\n\n  var record = useLoads(context, fn, config);\n  return children(record);\n};\n\nLoads.defaultProps = {\n  inputs: []\n};\n\nfunction useCache(context) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      variables = _ref.variables;\n\n  var cacheKey = Array.isArray(context) ? context.join('.') : context;\n  var variablesHash = useMemo(function () {\n    return JSON.stringify(variables);\n  }, [variables]);\n\n  if (variablesHash) {\n    cacheKey = \"\".concat(cacheKey, \".\").concat(variablesHash);\n  }\n\n  var _React$useState = useState(function () {\n    return records.get(cacheKey);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      record = _React$useState2[0],\n      setRecord = _React$useState2[1];\n\n  var handleData = useCallback(function (_ref2) {\n    var record = _ref2.record;\n    setRecord(record);\n  }, []);\n  useEffect(function () {\n    var updaters$$1 = updaters.get(cacheKey);\n\n    if (updaters$$1) {\n      var newUpdaters = [].concat(_toConsumableArray(updaters$$1), [handleData]);\n      updaters.set(cacheKey, newUpdaters);\n    } else {\n      updaters.set(cacheKey, [handleData]);\n    }\n  });\n  return record;\n}\n\nfunction useGetStates() {\n  for (var _len = arguments.length, records = new Array(_len), _key = 0; _key < _len; _key++) {\n    records[_key] = arguments[_key];\n  }\n\n  var isIdle = useMemo(function () {\n    return !records.some(function (record) {\n      return !record.isIdle;\n    });\n  }, [records]);\n  var isPending = useMemo(function () {\n    return records.some(function (record) {\n      return record.isPending;\n    });\n  }, [records]);\n  var isPendingSlow = useMemo(function () {\n    return records.some(function (record) {\n      return record.isPendingSlow;\n    });\n  }, [records]);\n  var isResolved = useMemo(function () {\n    return !records.some(function (record) {\n      return !record.isResolved && !record.isIdle;\n    });\n  }, [records]);\n  var isRejected = useMemo(function () {\n    return records.some(function (record) {\n      return record.isRejected;\n    });\n  }, [records]);\n  var isReloading = useMemo(function () {\n    return records.some(function (record) {\n      return record.isReloading;\n    });\n  }, [records]);\n  var isReloadingSlow = useMemo(function () {\n    return records.some(function (record) {\n      return record.isReloadingSlow;\n    });\n  }, [records]);\n  return useMemo(function () {\n    return {\n      isIdle: isIdle,\n      isPending: isPending,\n      isPendingSlow: isPendingSlow,\n      isResolved: isResolved,\n      isRejected: isRejected,\n      isReloading: isReloading,\n      isReloadingSlow: isReloadingSlow\n    };\n  }, [isIdle, isPending, isPendingSlow, isRejected, isReloading, isReloadingSlow, isResolved]);\n}\n\nexport { cache, invocationTimestamps, records, promises, revalidators, suspenders, updaters, createResource, Loads, defaultConfig, Context, Provider, preload, useCache, useLoads, useDeferredLoads, useGetStates };","map":{"version":3,"sources":["/Users/davimello/Creative Cloud Files/Davi/code/portfolio-react/node_modules/react-loads-next/es/index.js"],"names":["createContext","useMemo","createElement","useRef","useEffect","useCallback","useContext","useReducer","useState","_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_objectSpread","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","_objectWithoutProperties","sourceSymbolKeys","propertyIsEnumerable","call","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","arr2","iter","toString","from","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","err","TypeError","invocationTimestamps","Map","recordsCache","records","clear","opts","cacheProvider","delete","_delete","set","valOrFn","record","get","cacheTimeout","clearTimeout","val","cacheTime","setTimeout","updated","Date","promises","revalidators","suspenders","updaters","cache","freeze","CACHE_STRATEGIES","CONTEXT_ONLY","CONTEXT_AND_VARIABLES","LOAD_POLICIES","CACHE_FIRST","CACHE_AND_LOAD","LOAD_ONLY","CACHE_ONLY","STATES","IDLE","PENDING","PENDING_SLOW","RESOLVED","REJECTED","RELOADING","RELOADING_SLOW","defaultConfig","cacheStrategy","debounce","debounceCache","dedupingInterval","delay","defer","loadPolicy","revalidateOnWindowFocus","revalidateTime","suspense","throwError","timeout","Context","Provider","_ref","children","config","newConfig","assign","useDetectMounted","hasMounted","hasRendered","current","cleanup","noop","useInterval","callback","savedCallback","handler","apply","id","setInterval","clearInterval","usePrevious","ref","useTimeout","_setTimeout","fn","ms","_clearTimeout","isDocumentVisible","document","visibilityState","isOnline","navigator","onLine","getCacheKey","context","variablesHash","cacheKey","join","broadcastChanges","updaters$$1","updater","shouldBroadcast","IDLE_RECORD","error","response","state","useLoads","localConfig","globalConfig","dedupeManualLoad","_initialResponse","initialResponse","onReject","onResolve","pollingInterval","pollWhile","pollWhenHidden","rejectRetryInterval","updateFn","update","variables","JSON","stringify","loadCount","debounceCount","prevCacheKey","isSameContext","prevVariablesHash","isSameVariables","_useDetectMounted","_useDetectMounted2","_useTimeout","_useTimeout2","setDelayTimeout","clearDelayTimeout","_useTimeout3","_useTimeout4","setErrorRetryTimeout","_useTimeout5","_useTimeout6","setTimeoutTimeout","clearTimeoutTimeout","cachedRecord","initialRecord","reducer","action","type","isCached","_React$useReducer","_React$useReducer2","dispatch","handleLoading","isReloading","isSlow","promise","reloadingState","pendingState","handleData","_ref2","count","Boolean","isSuspended","handleOptimisticData","_ref3","data","contextOrCallback","newData","optimisticCacheKey","_variablesHash","cachedValue","newRecord","newCallback","load","_len","_args","_key","_opts$setInvocationTi","setInvocationTimestamp","isManualInvoke","args","arg","name","now","getTime","latestInvocationTimestamp","Math","abs","isDuplicate","isStale","isCachedWithCacheFirst","loadFn","promiseOrFn","setResponse","setError","then","catch","_count","min","_timeout","random","map","reset","newUpdaters","revalidate","shouldPoll","states","isIdle","isPending","isPendingSlow","isResolved","isRejected","isReloadingSlow","_record","eventsBinded","window","addEventListener","revalidator","preload","setData","Error","attemptCount","finally","useLoads$$1","loadsConfig","useDeferredLoads","contextOrFn","fnOrConfig","maybeConfig","createLoadsHooks","entries","reduce","currentLoaders","loadKey","loader","preload$$1","useDeferredLoads$$1","createResource","Loads","inputs","defaultProps","useCache","_React$useState","_React$useState2","setRecord","useGetStates","some"],"mappings":"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","sourcesContent":["import { createContext, useMemo, createElement, useRef, useEffect, useCallback, useContext, useReducer, useState } from 'react';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\n////////////////////////////////////////////////////////\nvar invocationTimestamps = new Map(); ////////////////////////////////////////////////////////\n\nvar recordsCache = new Map();\nvar records = {\n  clear: function clear(opts) {\n    recordsCache.clear();\n\n    if (opts && opts.cacheProvider) {\n      opts.cacheProvider.clear();\n    }\n\n    return;\n  },\n  delete: function _delete(key, opts) {\n    recordsCache.delete(key);\n\n    if (opts && opts.cacheProvider) {\n      opts.cacheProvider.delete(key);\n    }\n\n    return;\n  },\n  set: function set(key, valOrFn, opts) {\n    var record = recordsCache.get(key);\n\n    if (record && record.cacheTimeout) {\n      clearTimeout(record.cacheTimeout);\n    }\n\n    var val = valOrFn;\n\n    if (typeof val === 'function') {\n      val = val(record || {});\n    }\n\n    var cacheTimeout;\n\n    if (opts && opts.cacheTime) {\n      cacheTimeout = setTimeout(function () {\n        records.delete(key);\n      }, opts.cacheTime);\n    } // Set an updated timestamp on the cached record\n\n\n    val = _objectSpread({}, val, {\n      cacheTimeout: cacheTimeout,\n      updated: new Date()\n    });\n    recordsCache.set(key, val);\n\n    if (opts && opts.cacheProvider) {\n      opts.cacheProvider.set(key, val);\n    }\n\n    return;\n  },\n  get: function get(key, opts) {\n    // First, check to see if the record exists in the cache.\n    var record = recordsCache.get(key);\n\n    if (record) {\n      return record;\n    } // Otherwise, fallback to the cache provider.\n\n\n    if (opts && opts.cacheProvider) {\n      var value = opts.cacheProvider.get(key);\n\n      if (value) {\n        return value;\n      }\n    }\n\n    return undefined;\n  }\n}; ////////////////////////////////////////////////////////\n\nvar promises = new Map();\nvar revalidators = new Map();\nvar suspenders = new Map();\nvar updaters = new Map();\n\nvar cache = /*#__PURE__*/Object.freeze({\n  invocationTimestamps: invocationTimestamps,\n  records: records,\n  promises: promises,\n  revalidators: revalidators,\n  suspenders: suspenders,\n  updaters: updaters\n});\n\nvar CACHE_STRATEGIES = {\n  CONTEXT_ONLY: 'context-only',\n  CONTEXT_AND_VARIABLES: 'context-and-variables'\n};\nvar LOAD_POLICIES = {\n  CACHE_FIRST: 'cache-first',\n  CACHE_AND_LOAD: 'cache-and-load',\n  LOAD_ONLY: 'load-only',\n  CACHE_ONLY: 'cache-only'\n};\nvar STATES = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  PENDING_SLOW: 'pending-slow',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n  RELOADING: 'reloading',\n  RELOADING_SLOW: 'reloading-slow'\n};\n\nvar defaultConfig = {\n  cacheTime: 0,\n  cacheStrategy: CACHE_STRATEGIES.CONTEXT_AND_VARIABLES,\n  debounce: 0,\n  debounceCache: true,\n  dedupingInterval: 500,\n  delay: 0,\n  defer: false,\n  loadPolicy: LOAD_POLICIES.CACHE_AND_LOAD,\n  revalidateOnWindowFocus: false,\n  revalidateTime: 300000,\n  suspense: false,\n  throwError: false,\n  timeout: 5000\n};\nvar Context = createContext(defaultConfig);\nfunction Provider(_ref) {\n  var children = _ref.children,\n      config = _ref.config;\n  var newConfig = useMemo(function () {\n    return Object.assign(defaultConfig, config);\n  }, [config]);\n  return createElement(Context.Provider, {\n    value: newConfig\n  }, children);\n}\n\nfunction useDetectMounted() {\n  var hasMounted = useRef(true);\n  var hasRendered = useRef(false);\n  useEffect(function () {\n    hasRendered.current = true;\n    return function cleanup() {\n      hasMounted.current = false;\n    };\n  }, []);\n  return [hasMounted, hasRendered];\n}\n\nvar noop = function noop() {};\n\nfunction useInterval(callback, delay) {\n  var savedCallback = useRef(noop);\n  useEffect(function () {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(function () {\n    var handler = function handler() {\n      return savedCallback.current.apply(savedCallback, arguments);\n    };\n\n    if (typeof delay === 'number') {\n      var id = setInterval(handler, delay);\n      return function () {\n        return clearInterval(id);\n      };\n    }\n\n    return;\n  }, [delay]);\n}\n\nfunction usePrevious(value) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\nfunction useTimeout() {\n  var timeout = useRef(undefined);\n\n  var _setTimeout = useCallback(function (fn, ms) {\n    // @ts-ignore\n    timeout.current = setTimeout(fn, ms);\n  }, []);\n\n  var _clearTimeout = useCallback(function () {\n    return clearTimeout(timeout.current);\n  }, []);\n\n  useEffect(function () {\n    return function cleanup() {\n      if (timeout) {\n        clearTimeout(timeout.current);\n      }\n    };\n  }, []);\n  return [_setTimeout, _clearTimeout];\n}\n\nfunction isDocumentVisible() {\n  if (typeof document !== 'undefined' && typeof document.visibilityState !== 'undefined') {\n    return document.visibilityState !== 'hidden';\n  }\n\n  return true;\n}\nfunction isOnline() {\n  if (typeof navigator.onLine !== 'undefined') {\n    return navigator.onLine;\n  }\n\n  return true;\n}\nfunction getCacheKey(_ref) {\n  var context = _ref.context,\n      variablesHash = _ref.variablesHash,\n      cacheStrategy = _ref.cacheStrategy;\n  var cacheKey = Array.isArray(context) ? context.join('.') : context;\n\n  if (variablesHash && cacheStrategy === CACHE_STRATEGIES.CONTEXT_AND_VARIABLES) {\n    cacheKey = \"\".concat(cacheKey, \".\").concat(variablesHash);\n  }\n\n  return cacheKey;\n}\n\nfunction broadcastChanges(cacheKey, record) {\n  var updaters$$1 = updaters.get(cacheKey);\n\n  if (updaters$$1) {\n    updaters$$1.forEach(function (updater) {\n      return updater({\n        record: record,\n        shouldBroadcast: false\n      });\n    });\n  }\n}\n\nvar IDLE_RECORD = {\n  error: undefined,\n  response: undefined,\n  state: STATES.IDLE\n};\nfunction useLoads(context, fn, localConfig) {\n  var globalConfig = useContext(Context);\n\n  var config = _objectSpread({}, globalConfig, localConfig || {});\n\n  var cacheProvider = config.cacheProvider,\n      cacheStrategy = config.cacheStrategy,\n      cacheTime = config.cacheTime,\n      debounce = config.debounce,\n      debounceCache = config.debounceCache,\n      dedupingInterval = config.dedupingInterval,\n      dedupeManualLoad = config.dedupeManualLoad,\n      delay = config.delay,\n      _initialResponse = config.initialResponse,\n      loadPolicy = config.loadPolicy,\n      onReject = config.onReject,\n      onResolve = config.onResolve,\n      pollingInterval = config.pollingInterval,\n      pollWhile = config.pollWhile,\n      pollWhenHidden = config.pollWhenHidden,\n      rejectRetryInterval = config.rejectRetryInterval,\n      revalidateOnWindowFocus = config.revalidateOnWindowFocus,\n      revalidateTime = config.revalidateTime,\n      suspense = config.suspense,\n      throwError = config.throwError,\n      timeout = config.timeout,\n      updateFn = config.update;\n  var defer = config.defer;\n  var variables = config.variables;\n\n  if (typeof variables === 'function') {\n    try {\n      variables = variables();\n      defer = config.defer;\n    } catch (err) {\n      defer = true;\n    }\n  }\n\n  var variablesHash = useMemo(function () {\n    return JSON.stringify(variables);\n  }, [variables]);\n  var cacheKey = getCacheKey({\n    context: context,\n    variablesHash: variablesHash,\n    cacheStrategy: cacheStrategy\n  });\n  var loadCount = useRef(0);\n  var debounceCount = useRef(0);\n  var prevCacheKey = usePrevious(cacheKey);\n  var isSameContext = !prevCacheKey || prevCacheKey === cacheKey;\n  var prevVariablesHash = usePrevious(JSON.stringify(variables));\n  var isSameVariables = variablesHash === prevVariablesHash;\n\n  var _useDetectMounted = useDetectMounted(),\n      _useDetectMounted2 = _slicedToArray(_useDetectMounted, 2),\n      hasMounted = _useDetectMounted2[0],\n      hasRendered = _useDetectMounted2[1];\n\n  var _useTimeout = useTimeout(),\n      _useTimeout2 = _slicedToArray(_useTimeout, 2),\n      setDelayTimeout = _useTimeout2[0],\n      clearDelayTimeout = _useTimeout2[1];\n\n  var _useTimeout3 = useTimeout(),\n      _useTimeout4 = _slicedToArray(_useTimeout3, 1),\n      setErrorRetryTimeout = _useTimeout4[0];\n\n  var _useTimeout5 = useTimeout(),\n      _useTimeout6 = _slicedToArray(_useTimeout5, 2),\n      setTimeoutTimeout = _useTimeout6[0],\n      clearTimeoutTimeout = _useTimeout6[1];\n\n  var cachedRecord = useMemo(function () {\n    if (cacheKey && loadPolicy !== LOAD_POLICIES.LOAD_ONLY) {\n      return records.get(cacheKey, {\n        cacheProvider: cacheProvider\n      });\n    }\n\n    return;\n  }, [cacheProvider, cacheKey, loadPolicy]);\n  var initialResponse = useMemo(function () {\n    return _initialResponse;\n  }, []); // eslint-disable-line\n\n  var initialRecord = initialResponse ? {\n    response: initialResponse,\n    error: undefined,\n    state: STATES.RESOLVED\n  } : _objectSpread({}, IDLE_RECORD, {\n    state: defer ? STATES.IDLE : STATES.PENDING\n  });\n\n  if (cachedRecord && !defer) {\n    initialRecord = cachedRecord;\n  }\n\n  var reducer = useCallback(function (state, action) {\n    switch (action.type) {\n      case STATES.IDLE:\n        return IDLE_RECORD;\n\n      case STATES.PENDING:\n        return _objectSpread({}, state, {\n          state: STATES.PENDING\n        });\n\n      case STATES.PENDING_SLOW:\n        return _objectSpread({}, state, {\n          state: STATES.PENDING_SLOW\n        });\n\n      case STATES.RESOLVED:\n        return {\n          isCached: action.isCached,\n          error: undefined,\n          response: action.response,\n          state: STATES.RESOLVED\n        };\n\n      case STATES.REJECTED:\n        return {\n          isCached: action.isCached,\n          error: action.error,\n          response: undefined,\n          state: STATES.REJECTED\n        };\n\n      case STATES.RELOADING:\n        return _objectSpread({}, state, {\n          state: STATES.RELOADING\n        });\n\n      case STATES.RELOADING_SLOW:\n        return _objectSpread({}, state, {\n          state: STATES.RELOADING_SLOW\n        });\n\n      default:\n        return state;\n    }\n  }, []);\n\n  var _React$useReducer = useReducer(reducer, initialRecord),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      record = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  var handleLoading = useCallback(function (_ref) {\n    var isReloading = _ref.isReloading,\n        isSlow = _ref.isSlow,\n        promise = _ref.promise;\n    var reloadingState = isSlow ? STATES.RELOADING_SLOW : STATES.RELOADING;\n    var pendingState = isSlow ? STATES.PENDING_SLOW : STATES.PENDING;\n    dispatch({\n      type: isReloading ? reloadingState : pendingState\n    });\n\n    if (cacheKey) {\n      records.set(cacheKey, function (record) {\n        return _objectSpread({}, record, {\n          state: isReloading ? STATES.RELOADING : STATES.PENDING\n        });\n      }, {\n        cacheTime: cacheTime,\n        cacheProvider: cacheProvider\n      });\n\n      if (!isReloading) {\n        promises.set(cacheKey, promise);\n      }\n    }\n  }, [cacheProvider, cacheTime, cacheKey]);\n  var handleData = useCallback(function (_ref2) {\n    var count = _ref2.count,\n        record = _ref2.record,\n        shouldBroadcast = _ref2.shouldBroadcast;\n\n    if (hasMounted.current && (!count || count === loadCount.current)) {\n      // @ts-ignore\n      clearDelayTimeout(); // @ts-ignore\n\n      clearTimeoutTimeout();\n      dispatch(_objectSpread({\n        type: record.state,\n        isCached: Boolean(cacheKey)\n      }, record));\n\n      if (cacheKey) {\n        records.set(cacheKey, record, {\n          cacheProvider: cacheProvider,\n          cacheTime: cacheTime\n        });\n        var isSuspended = suspenders.get(cacheKey);\n        suspenders.set(cacheKey, typeof isSuspended === 'undefined');\n        promises.delete(cacheKey);\n\n        if (shouldBroadcast) {\n          broadcastChanges(cacheKey, record);\n        }\n      }\n    }\n  }, [cacheProvider, cacheTime, clearDelayTimeout, clearTimeoutTimeout, cacheKey, hasMounted]);\n  var handleOptimisticData = useCallback(function (_ref3, state, count) {\n    var data = _ref3.data,\n        contextOrCallback = _ref3.contextOrCallback,\n        callback = _ref3.callback;\n    var newData = data;\n    var optimisticCacheKey = cacheKey;\n\n    if (_typeof(contextOrCallback) === 'object') {\n      var _variablesHash = JSON.stringify(contextOrCallback.variables);\n\n      optimisticCacheKey = getCacheKey({\n        context: contextOrCallback.context,\n        variablesHash: _variablesHash,\n        cacheStrategy: cacheStrategy\n      });\n    }\n\n    if (typeof data === 'function') {\n      var cachedValue = IDLE_RECORD;\n\n      if (optimisticCacheKey) {\n        cachedValue = records.get(optimisticCacheKey, {\n          cacheProvider: cacheProvider\n        }) || IDLE_RECORD;\n      }\n\n      newData = data(state === STATES.RESOLVED ? cachedValue.response : cachedValue.error);\n    }\n\n    var newRecord = {\n      error: state === STATES.REJECTED ? newData : undefined,\n      response: state === STATES.RESOLVED ? newData : undefined,\n      state: state\n    };\n\n    if (!optimisticCacheKey || cacheKey === optimisticCacheKey) {\n      handleData({\n        count: count,\n        record: newRecord,\n        shouldBroadcast: true\n      });\n    } else {\n      records.set(optimisticCacheKey, newRecord, {\n        cacheProvider: cacheProvider,\n        cacheTime: cacheTime\n      });\n    }\n\n    var newCallback = typeof contextOrCallback === 'function' ? contextOrCallback : callback;\n    newCallback && newCallback(newData);\n  }, [cacheStrategy, cacheKey, cacheProvider, handleData, cacheTime]);\n  var load = useCallback(function () {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return function () {\n      for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n        _args[_key] = arguments[_key];\n      }\n\n      var _opts$setInvocationTi = opts.setInvocationTimestamp,\n          setInvocationTimestamp = _opts$setInvocationTi === void 0 ? true : _opts$setInvocationTi;\n\n      if (!opts.isManualInvoke && variables && isSameVariables) {\n        return;\n      } // Build cacheKey based of these args?\n\n\n      var args = _args.filter(function (arg) {\n        return arg.constructor.name !== 'Class';\n      });\n\n      if (variables && (!args || args.length === 0)) {\n        args = variables;\n      }\n\n      if (context && debounce > 0) {\n        var now = new Date().getTime();\n\n        if (setInvocationTimestamp) {\n          invocationTimestamps.set(context, now);\n          invocationTimestamps.set('latest', now);\n        }\n\n        var latestInvocationTimestamp = invocationTimestamps.get(context || 'latest');\n\n        if (latestInvocationTimestamp) {\n          if (Math.abs(now - latestInvocationTimestamp) < debounce) {\n            debounceCount.current = debounceCount.current + 1;\n            setTimeout(function () {\n              return load(_objectSpread({\n                count: debounceCount.current,\n                setInvocationTimestamp: false\n              }, opts)).apply(void 0, _args);\n            }, debounce);\n            return;\n          }\n\n          if (debounceCount.current !== (opts.count || 0)) {\n            return;\n          }\n        }\n\n        debounceCount.current = 0;\n      }\n\n      var cachedRecord;\n\n      if (cacheKey) {\n        cachedRecord = records.get(cacheKey, {\n          cacheProvider: cacheProvider\n        });\n      }\n\n      if (cachedRecord) {\n        var isDuplicate = // @ts-ignore\n        Math.abs(new Date() - cachedRecord.updated) < dedupingInterval && (!opts.isManualInvoke || dedupeManualLoad);\n        if (isDuplicate) return;\n      }\n\n      loadCount.current = loadCount.current + 1;\n      var count = loadCount.current;\n\n      if (cacheKey) {\n        var isSuspended = suspenders.get(cacheKey);\n\n        if (suspense && isSuspended) {\n          suspenders.set(cacheKey, false);\n          return;\n        }\n      }\n\n      if (cacheKey && loadPolicy !== LOAD_POLICIES.LOAD_ONLY) {\n        if (!defer && cachedRecord) {\n          dispatch(_objectSpread({\n            type: cachedRecord.state,\n            isCached: true\n          }, cachedRecord));\n\n          if (cachedRecord.state === STATES.RESOLVED || cachedRecord.state === STATES.REJECTED) {\n            // @ts-ignore\n            var isStale = Math.abs(new Date() - cachedRecord.updated) >= revalidateTime;\n            var isCachedWithCacheFirst = !isStale && !opts.isManualInvoke && loadPolicy === LOAD_POLICIES.CACHE_FIRST;\n            if (isCachedWithCacheFirst) return;\n          }\n        }\n      }\n\n      var loadFn = opts.fn ? opts.fn : fn;\n      var promiseOrFn = loadFn.apply(void 0, _toConsumableArray(args));\n      var promise = promiseOrFn;\n\n      if (typeof promiseOrFn === 'function') {\n        promise = promiseOrFn({\n          cachedRecord: cachedRecord,\n          setResponse: function setResponse(data, contextOrCallback, callback) {\n            return handleOptimisticData({\n              data: data,\n              contextOrCallback: contextOrCallback,\n              callback: callback\n            }, STATES.RESOLVED, count);\n          },\n          setError: function setError(data, contextOrCallback, callback) {\n            return handleOptimisticData({\n              data: data,\n              contextOrCallback: contextOrCallback,\n              callback: callback\n            }, STATES.REJECTED, count);\n          }\n        });\n      }\n\n      var isReloading = context && isSameContext && (count > 1 || cachedRecord && !defer || initialResponse) || debounce > 0 && debounceCache;\n\n      if (delay > 0) {\n        setDelayTimeout(function () {\n          return handleLoading({\n            isReloading: isReloading,\n            promise: promise\n          });\n        }, delay);\n      } else {\n        handleLoading({\n          isReloading: isReloading,\n          promise: promise\n        });\n      }\n\n      if (timeout > 0) {\n        setTimeoutTimeout(function () {\n          return handleLoading({\n            isReloading: isReloading,\n            isSlow: true,\n            promise: promise\n          });\n        }, timeout);\n      }\n\n      if (typeof promise === 'function') return;\n      return promise.then(function (response) {\n        handleData({\n          count: count,\n          record: {\n            error: undefined,\n            response: response,\n            state: STATES.RESOLVED\n          },\n          shouldBroadcast: true\n        });\n        onResolve && onResolve(response);\n        return response;\n      }).catch(function (error) {\n        handleData({\n          count: count,\n          record: {\n            response: undefined,\n            error: error,\n            state: STATES.REJECTED\n          },\n          shouldBroadcast: false\n        });\n        onReject && onReject(error);\n\n        if (rejectRetryInterval) {\n          var _count = Math.min(loadCount.current || 0, 8);\n\n          var _timeout = typeof rejectRetryInterval === 'function' ? rejectRetryInterval(_count) : ~~((Math.random() + 0.5) * (1 << _count)) * rejectRetryInterval;\n\n          setErrorRetryTimeout(function () {\n            return load()(args);\n          }, _timeout);\n        }\n\n        if (throwError && !suspense) {\n          throw error;\n        }\n      });\n    };\n  }, [variablesHash, isSameVariables, context, debounce, cacheKey, loadPolicy, fn, isSameContext, defer, initialResponse, debounceCache, delay, timeout, cacheProvider, dedupingInterval, dedupeManualLoad, suspense, revalidateTime, handleOptimisticData, setDelayTimeout, handleLoading, setTimeoutTimeout, handleData, onResolve, onReject, rejectRetryInterval, throwError, setErrorRetryTimeout]);\n  var update = useMemo(function () {\n    if (!updateFn) return;\n\n    if (Array.isArray(updateFn)) {\n      return updateFn.map(function (fn) {\n        return load({\n          fn: fn,\n          isManualInvoke: true\n        });\n      });\n    }\n\n    return load({\n      fn: updateFn,\n      isManualInvoke: true\n    });\n  }, [load, updateFn]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: STATES.IDLE\n    });\n  }, []);\n  useEffect(function () {\n    if (!cachedRecord && cacheKey && !initialResponse && !debounceCache) {\n      reset();\n    }\n  }, [cachedRecord, cacheKey, initialResponse, reset, debounceCache]);\n  useEffect(function () {\n    if (cachedRecord && !defer && loadPolicy !== LOAD_POLICIES.LOAD_ONLY) {\n      dispatch(_objectSpread({\n        type: cachedRecord.state,\n        isCached: true\n      }, cachedRecord));\n    }\n  }, [cachedRecord, loadPolicy, dispatch, defer]);\n  useEffect(function () {\n    if (defer || suspense && !hasRendered.current && !cachedRecord || loadPolicy === LOAD_POLICIES.CACHE_ONLY) return;\n    load()();\n  }, [defer, cacheKey, suspense, hasRendered, cachedRecord, load, loadPolicy]);\n  useEffect(function () {\n    if (defer) return;\n    var updaters$$1 = updaters.get(cacheKey);\n\n    if (updaters$$1) {\n      var newUpdaters = [].concat(_toConsumableArray(updaters$$1), [handleData]);\n      updaters.set(cacheKey, newUpdaters);\n    } else {\n      updaters.set(cacheKey, [handleData]);\n    }\n\n    return function cleanup() {\n      var updaters$$1 = updaters.get(cacheKey);\n      var newUpdaters = updaters$$1.filter(function (updater) {\n        return updater !== handleData;\n      });\n      updaters.set(cacheKey, newUpdaters);\n    };\n  }, [cacheKey, defer, handleData]);\n  useEffect(function () {\n    if (!revalidateOnWindowFocus || defer) return;\n    var revalidate = load();\n    revalidators.set(cacheKey, revalidate);\n    return function cleanup() {\n      revalidators.delete(cacheKey);\n    };\n  }, [cacheKey, defer, handleData, load, revalidateOnWindowFocus]);\n  var shouldPoll = !defer;\n\n  if (shouldPoll && pollWhile) {\n    if (typeof pollWhile === 'function') {\n      shouldPoll = pollWhile(record);\n    } else {\n      shouldPoll = pollWhile;\n    }\n  }\n\n  useInterval(function () {\n    if (!isDocumentVisible() && !pollWhenHidden) return;\n    load({\n      isManualInvoke: true\n    })();\n  }, shouldPoll ? pollingInterval : undefined);\n  var states = useMemo(function () {\n    return {\n      isIdle: record.state === STATES.IDLE && Boolean(!record.response),\n      isPending: record.state === STATES.PENDING || record.state === STATES.PENDING_SLOW,\n      isPendingSlow: record.state === STATES.PENDING_SLOW,\n      isResolved: record.state === STATES.RESOLVED || Boolean(record.response),\n      isRejected: record.state === STATES.REJECTED,\n      isReloading: record.state === STATES.RELOADING || record.state === STATES.RELOADING_SLOW,\n      isReloadingSlow: record.state === STATES.RELOADING_SLOW\n    };\n  }, [record.response, record.state]);\n\n  if (suspense && !defer) {\n    if (cacheKey) {\n      var _record = records.get(cacheKey);\n\n      var promise = promises.get(cacheKey);\n\n      if (_record && promise) {\n        throw promise;\n      }\n\n      if (!_record) {\n        load()();\n      }\n    }\n\n    if (states.isRejected) {\n      throw record.error;\n    }\n  }\n\n  return useMemo(function () {\n    return _objectSpread({\n      load: load({\n        isManualInvoke: true\n      }),\n      update: update,\n      reset: reset,\n      response: record.response,\n      error: record.error,\n      state: record.state\n    }, states, {\n      isCached: Boolean(record.isCached)\n    });\n  }, [load, update, reset, record.response, record.error, record.state, record.isCached, states]);\n}\nvar eventsBinded = false;\n\nif (typeof window !== 'undefined' && window.addEventListener && !eventsBinded) {\n  var revalidate = function revalidate() {\n    if (!isDocumentVisible() || !isOnline()) return;\n    revalidators.forEach(function (revalidator) {\n      return revalidator && revalidator();\n    });\n  };\n\n  window.addEventListener('visibilitychange', revalidate, false);\n  window.addEventListener('focus', revalidate, false);\n  eventsBinded = true;\n}\n\nfunction preload(context, promiseOrFn, localConfig) {\n  var config = _objectSpread({}, defaultConfig, localConfig || {});\n\n  var cacheTime = config.cacheTime,\n      cacheProvider = config.cacheProvider,\n      cacheStrategy = config.cacheStrategy,\n      dedupingInterval = config.dedupingInterval,\n      loadPolicy = config.loadPolicy,\n      onResolve = config.onResolve,\n      onReject = config.onReject,\n      rejectRetryInterval = config.rejectRetryInterval,\n      revalidateTime = config.revalidateTime,\n      suspense = config.suspense,\n      throwError = config.throwError,\n      variables = config.variables;\n\n  function setData(_ref) {\n    var cacheKey = _ref.cacheKey,\n        record = _ref.record;\n    var config = {\n      cacheProvider: cacheProvider,\n      cacheTime: cacheTime\n    };\n    records.set(cacheKey, record, config);\n  }\n\n  var count = 0;\n\n  function load() {\n    count = count + 1;\n    var args = variables || [];\n\n    if (typeof args === 'function') {\n      try {\n        args = args() || [];\n      } catch (err) {\n        throw new Error('TODO');\n      }\n    }\n\n    var variablesHash = JSON.stringify(args);\n    var cacheKey = getCacheKey({\n      context: context,\n      variablesHash: variablesHash,\n      cacheStrategy: cacheStrategy\n    });\n    if (!cacheKey) throw new Error('preload() must have a context');\n    var cachedRecord;\n\n    if (loadPolicy !== LOAD_POLICIES.LOAD_ONLY) {\n      cachedRecord = records.get(cacheKey);\n    }\n\n    if (cachedRecord) {\n      // @ts-ignore\n      var isStale = Math.abs(new Date() - cachedRecord.updated) >= revalidateTime;\n      var isDuplicate = // @ts-ignore\n      Math.abs(new Date() - cachedRecord.updated) < dedupingInterval;\n      var isCachedWithCacheFirst = !isStale && loadPolicy === LOAD_POLICIES.CACHE_FIRST;\n      if (isDuplicate || isCachedWithCacheFirst) return;\n    }\n\n    var promise = promiseOrFn.apply(void 0, _toConsumableArray(args));\n\n    if (typeof promise === 'function') {\n      promise = promise({\n        cachedRecord: cachedRecord\n      });\n    }\n\n    var isReloading = Boolean(cachedRecord);\n    records.set(cacheKey, function (record) {\n      return _objectSpread({}, record, {\n        state: cachedRecord ? STATES.RELOADING : STATES.PENDING\n      });\n    }, {\n      cacheTime: cacheTime,\n      cacheProvider: cacheProvider\n    });\n\n    if (!isReloading) {\n      promises.set(cacheKey, promise);\n    }\n\n    if (typeof promise === 'function') return;\n    promise.then(function (response) {\n      var record = {\n        error: undefined,\n        response: response,\n        state: STATES.RESOLVED\n      };\n      setData({\n        cacheKey: cacheKey,\n        record: record\n      });\n      onResolve && onResolve(response);\n    }).catch(function (error) {\n      var record = {\n        response: undefined,\n        error: error,\n        state: STATES.REJECTED\n      };\n      setData({\n        cacheKey: cacheKey,\n        record: record\n      });\n      onReject && onReject(error);\n\n      if (rejectRetryInterval) {\n        var attemptCount = Math.min(count || 0, 8);\n        var timeout = typeof rejectRetryInterval === 'function' ? rejectRetryInterval(attemptCount) : ~~((Math.random() + 0.5) * (1 << attemptCount)) * rejectRetryInterval;\n        setTimeout(function () {\n          return load();\n        }, timeout);\n      }\n\n      if (throwError && !suspense) {\n        throw error;\n      }\n    }).finally(function () {\n      promises.delete(cacheKey);\n    });\n  }\n\n  load();\n  return {\n    useLoads: function useLoads$$1() {\n      var loadsConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return useLoads(context, promiseOrFn, _objectSpread({}, config, loadsConfig, {\n        loadPolicy: LOAD_POLICIES.CACHE_ONLY\n      }));\n    }\n  };\n}\n\nfunction useDeferredLoads(contextOrFn, fnOrConfig, maybeConfig) {\n  var context = contextOrFn;\n  var config = maybeConfig;\n  var fn = fnOrConfig;\n\n  if (typeof contextOrFn === 'function') {\n    context = null;\n    fn = contextOrFn;\n  }\n\n  if (_typeof(fnOrConfig) === 'object') {\n    config = fnOrConfig;\n  }\n\n  return useLoads(context, fn, _objectSpread({}, config, {\n    defer: true\n  }));\n}\n\nfunction createLoadsHooks(opts) {\n  return Object.entries(opts).reduce(function (currentLoaders, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        loadKey = _ref2[0],\n        val = _ref2[1];\n\n    if (loadKey[0] === '_' || typeof val === 'string') return currentLoaders;\n    var loader = val;\n    var config = {};\n\n    if (Array.isArray(val)) {\n      loader = val[0];\n      config = val[1] || {};\n    }\n\n    if (loadKey === 'fn') {\n      return _objectSpread({}, currentLoaders, {\n        preload: function preload$$1(loadsConfig) {\n          return preload(opts.context, loader, _objectSpread({}, config, loadsConfig));\n        },\n        useLoads: function useLoads$$1(loadsConfig) {\n          return useLoads(opts.context, loader, _objectSpread({}, config, loadsConfig));\n        },\n        useDeferredLoads: function useDeferredLoads$$1(loadsConfig) {\n          return useDeferredLoads(opts.context, loader, _objectSpread({}, config, loadsConfig));\n        }\n      });\n    }\n\n    return _objectSpread({}, currentLoaders, _defineProperty({}, loadKey, {\n      preload: function preload$$1(loadsConfig) {\n        return preload(opts.context, loader, _objectSpread({}, config, loadsConfig));\n      },\n      useLoads: function useLoads$$1(loadsConfig) {\n        return useLoads(opts.context, loader, _objectSpread({}, config, loadsConfig));\n      },\n      useDeferredLoads: function useDeferredLoads$$1(loadsConfig) {\n        return useDeferredLoads(opts.context, loader, _objectSpread({}, config, loadsConfig));\n      }\n    }));\n  }, {});\n}\n\nfunction createResource(opts) {\n  return _objectSpread({}, createLoadsHooks(opts));\n}\n\nvar Loads = function Loads(_ref) {\n  var children = _ref.children,\n      context = _ref.context,\n      fn = _ref.fn,\n      inputs = _ref.inputs,\n      config = _objectWithoutProperties(_ref, [\"children\", \"context\", \"fn\", \"inputs\"]);\n\n  var record = useLoads(context, fn, config);\n  return children(record);\n};\nLoads.defaultProps = {\n  inputs: []\n};\n\nfunction useCache(context) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      variables = _ref.variables;\n\n  var cacheKey = Array.isArray(context) ? context.join('.') : context;\n  var variablesHash = useMemo(function () {\n    return JSON.stringify(variables);\n  }, [variables]);\n\n  if (variablesHash) {\n    cacheKey = \"\".concat(cacheKey, \".\").concat(variablesHash);\n  }\n\n  var _React$useState = useState(function () {\n    return records.get(cacheKey);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      record = _React$useState2[0],\n      setRecord = _React$useState2[1];\n\n  var handleData = useCallback(function (_ref2) {\n    var record = _ref2.record;\n    setRecord(record);\n  }, []);\n  useEffect(function () {\n    var updaters$$1 = updaters.get(cacheKey);\n\n    if (updaters$$1) {\n      var newUpdaters = [].concat(_toConsumableArray(updaters$$1), [handleData]);\n      updaters.set(cacheKey, newUpdaters);\n    } else {\n      updaters.set(cacheKey, [handleData]);\n    }\n  });\n  return record;\n}\n\nfunction useGetStates() {\n  for (var _len = arguments.length, records = new Array(_len), _key = 0; _key < _len; _key++) {\n    records[_key] = arguments[_key];\n  }\n\n  var isIdle = useMemo(function () {\n    return !records.some(function (record) {\n      return !record.isIdle;\n    });\n  }, [records]);\n  var isPending = useMemo(function () {\n    return records.some(function (record) {\n      return record.isPending;\n    });\n  }, [records]);\n  var isPendingSlow = useMemo(function () {\n    return records.some(function (record) {\n      return record.isPendingSlow;\n    });\n  }, [records]);\n  var isResolved = useMemo(function () {\n    return !records.some(function (record) {\n      return !record.isResolved && !record.isIdle;\n    });\n  }, [records]);\n  var isRejected = useMemo(function () {\n    return records.some(function (record) {\n      return record.isRejected;\n    });\n  }, [records]);\n  var isReloading = useMemo(function () {\n    return records.some(function (record) {\n      return record.isReloading;\n    });\n  }, [records]);\n  var isReloadingSlow = useMemo(function () {\n    return records.some(function (record) {\n      return record.isReloadingSlow;\n    });\n  }, [records]);\n  return useMemo(function () {\n    return {\n      isIdle: isIdle,\n      isPending: isPending,\n      isPendingSlow: isPendingSlow,\n      isResolved: isResolved,\n      isRejected: isRejected,\n      isReloading: isReloading,\n      isReloadingSlow: isReloadingSlow\n    };\n  }, [isIdle, isPending, isPendingSlow, isRejected, isReloading, isReloadingSlow, isResolved]);\n}\n\nexport { cache, invocationTimestamps, records, promises, revalidators, suspenders, updaters, createResource, Loads, defaultConfig, Context, Provider, preload, useCache, useLoads, useDeferredLoads, useGetStates };\n"]},"metadata":{},"sourceType":"module"}