{"ast":null,"code":"import { b as _createForOfIteratorHelperLoose, a as _objectSpread2, _ as _objectWithoutPropertiesLoose } from '../_rollupPluginBabelHelpers-1f0bf8c2.js';\nimport { useRef, useEffect, useReducer, useState, useCallback } from 'react';\nimport { useIsomorphicEffect } from 'reakit-utils/useIsomorphicEffect';\nimport { useSealedState } from 'reakit-utils/useSealedState';\nimport { g as groupItems, r as reverse, f as flatten } from '../reverse-30eaa122.js';\nimport { f as findFirstEnabledItem, g as getCurrentId } from '../getCurrentId-5aa9849e.js';\nimport { f as findEnabledItemById } from '../findEnabledItemById-8ddca752.js';\nimport '../Id/IdProvider.js';\nimport { applyState } from 'reakit-utils/applyState';\nimport { unstable_useIdState } from '../Id/IdState.js';\n\nfunction isElementPreceding(element1, element2) {\n  return Boolean(element2.compareDocumentPosition(element1) & Node.DOCUMENT_POSITION_PRECEDING);\n}\n\nfunction findDOMIndex(items, item) {\n  return items.findIndex(function (currentItem) {\n    if (!currentItem.ref.current || !item.ref.current) {\n      return false;\n    }\n\n    return isElementPreceding(item.ref.current, currentItem.ref.current);\n  });\n}\n\nfunction getMaxLength(rows) {\n  var maxLength = 0;\n\n  for (var _iterator = _createForOfIteratorHelperLoose(rows), _step; !(_step = _iterator()).done;) {\n    var length = _step.value.length;\n\n    if (length > maxLength) {\n      maxLength = length;\n    }\n  }\n\n  return maxLength;\n}\n/**\n * Turns [row1, row1, row2, row2] into [row1, row2, row1, row2]\n */\n\n\nfunction verticalizeItems(items) {\n  var groups = groupItems(items);\n  var maxLength = getMaxLength(groups);\n  var verticalized = [];\n\n  for (var i = 0; i < maxLength; i += 1) {\n    for (var _iterator = _createForOfIteratorHelperLoose(groups), _step; !(_step = _iterator()).done;) {\n      var group = _step.value;\n\n      if (group[i]) {\n        verticalized.push(_objectSpread2(_objectSpread2({}, group[i]), {}, {\n          // If there's no groupId, it means that it's not a grid composite,\n          // but a single row instead. So, instead of verticalizing it, that\n          // is, assigning a different groupId based on the column index, we\n          // keep it undefined so they will be part of the same group.\n          // It's useful when using up/down on one-dimensional composites.\n          groupId: group[i].groupId ? \"\" + i : undefined\n        }));\n      }\n    }\n  }\n\n  return verticalized;\n}\n\nfunction createEmptyItem(groupId) {\n  return {\n    id: \"__EMPTY_ITEM__\",\n    disabled: true,\n    ref: {\n      current: null\n    },\n    groupId: groupId\n  };\n}\n/**\n * Turns [[row1, row1], [row2]] into [[row1, row1], [row2, row2]]\n */\n\n\nfunction fillGroups(groups, currentId, shift) {\n  var maxLength = getMaxLength(groups);\n\n  for (var _iterator = _createForOfIteratorHelperLoose(groups), _step; !(_step = _iterator()).done;) {\n    var group = _step.value;\n\n    for (var i = 0; i < maxLength; i += 1) {\n      var item = group[i];\n\n      if (!item || shift && item.disabled) {\n        var isFrist = i === 0;\n        var previousItem = isFrist && shift ? findFirstEnabledItem(group) : group[i - 1];\n        group[i] = previousItem && currentId !== (previousItem === null || previousItem === void 0 ? void 0 : previousItem.id) && shift ? previousItem : createEmptyItem(previousItem === null || previousItem === void 0 ? void 0 : previousItem.groupId);\n      }\n    }\n  }\n\n  return groups;\n}\n\nvar nullItem = {\n  id: null,\n  ref: {\n    current: null\n  }\n};\n\nfunction placeItemsAfter(items, id, shouldInsertNullItem) {\n  var index = items.findIndex(function (item) {\n    return item.id === id;\n  });\n  return [].concat(items.slice(index + 1), shouldInsertNullItem ? [nullItem] : [], items.slice(0, index));\n}\n\nfunction getItemsInGroup(items, groupId) {\n  return items.filter(function (item) {\n    return item.groupId === groupId;\n  });\n}\n\nvar map = {\n  horizontal: \"vertical\",\n  vertical: \"horizontal\"\n};\n\nfunction getOppositeOrientation(orientation) {\n  return orientation && map[orientation];\n}\n\nfunction addItemAtIndex(array, item, index) {\n  if (!(index in array)) {\n    return [].concat(array, [item]);\n  }\n\n  return [].concat(array.slice(0, index), [item], array.slice(index));\n}\n\nfunction sortBasedOnDOMPosition(items) {\n  var pairs = items.map(function (item, index) {\n    return [index, item];\n  });\n  var isOrderDifferent = false;\n  pairs.sort(function (_ref, _ref2) {\n    var indexA = _ref[0],\n        a = _ref[1];\n    var indexB = _ref2[0],\n        b = _ref2[1];\n    var elementA = a.ref.current;\n    var elementB = b.ref.current;\n    if (!elementA || !elementB) return 0; // a before b\n\n    if (isElementPreceding(elementA, elementB)) {\n      if (indexA > indexB) {\n        isOrderDifferent = true;\n      }\n\n      return -1;\n    } // a after b\n\n\n    if (indexA < indexB) {\n      isOrderDifferent = true;\n    }\n\n    return 1;\n  });\n\n  if (isOrderDifferent) {\n    return pairs.map(function (_ref3) {\n      var _ = _ref3[0],\n          item = _ref3[1];\n      return item;\n    });\n  }\n\n  return items;\n}\n\nfunction setItemsBasedOnDOMPosition(items, setItems) {\n  var sortedItems = sortBasedOnDOMPosition(items);\n\n  if (items !== sortedItems) {\n    setItems(sortedItems);\n  }\n} // istanbul ignore next: JSDOM doesn't support IntersectionObverser\n// See https://github.com/jsdom/jsdom/issues/2032\n\n\nfunction useIntersectionObserver(items, setItems) {\n  var previousItems = useRef([]);\n  useEffect(function () {\n    var callback = function callback() {\n      var hasPreviousItems = !!previousItems.current.length; // We don't want to sort items if items have been just registered.\n\n      if (hasPreviousItems) {\n        setItemsBasedOnDOMPosition(items, setItems);\n      }\n\n      previousItems.current = items;\n    };\n\n    var observer = new IntersectionObserver(callback, {\n      root: document.body\n    });\n\n    for (var _iterator = _createForOfIteratorHelperLoose(items), _step; !(_step = _iterator()).done;) {\n      var item = _step.value;\n\n      if (item.ref.current) {\n        observer.observe(item.ref.current);\n      }\n    }\n\n    return function () {\n      observer.disconnect();\n    };\n  }, [items]);\n}\n\nfunction useTimeoutObserver(items, setItems) {\n  useEffect(function () {\n    var callback = function callback() {\n      return setItemsBasedOnDOMPosition(items, setItems);\n    };\n\n    var timeout = setTimeout(callback, 250);\n    return function () {\n      return clearTimeout(timeout);\n    };\n  });\n}\n\nfunction useSortBasedOnDOMPosition(items, setItems) {\n  if (typeof IntersectionObserver === \"function\") {\n    useIntersectionObserver(items, setItems);\n  } else {\n    useTimeoutObserver(items, setItems);\n  }\n}\n\nfunction reducer(state, action) {\n  var virtual = state.unstable_virtual,\n      rtl = state.rtl,\n      orientation = state.orientation,\n      items = state.items,\n      groups = state.groups,\n      currentId = state.currentId,\n      loop = state.loop,\n      wrap = state.wrap,\n      pastIds = state.pastIds,\n      shift = state.shift,\n      moves = state.unstable_moves,\n      includesBaseElement = state.unstable_includesBaseElement,\n      initialVirtual = state.initialVirtual,\n      initialRTL = state.initialRTL,\n      initialOrientation = state.initialOrientation,\n      initialCurrentId = state.initialCurrentId,\n      initialLoop = state.initialLoop,\n      initialWrap = state.initialWrap,\n      initialShift = state.initialShift,\n      hasSetCurrentId = state.hasSetCurrentId;\n\n  switch (action.type) {\n    case \"registerGroup\":\n      {\n        var _group = action.group; // If there are no groups yet, just add it as the first one\n\n        if (groups.length === 0) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            groups: [_group]\n          });\n        } // Finds the group index based on DOM position\n\n\n        var index = findDOMIndex(groups, _group);\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          groups: addItemAtIndex(groups, _group, index)\n        });\n      }\n\n    case \"unregisterGroup\":\n      {\n        var _id = action.id;\n        var nextGroups = groups.filter(function (group) {\n          return group.id !== _id;\n        }); // The group isn't registered, so do nothing\n\n        if (nextGroups.length === groups.length) {\n          return state;\n        }\n\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          groups: nextGroups\n        });\n      }\n\n    case \"registerItem\":\n      {\n        var _item = action.item; // Finds the item group based on the DOM hierarchy\n\n        var _group2 = groups.find(function (r) {\n          var _r$ref$current;\n\n          return (_r$ref$current = r.ref.current) === null || _r$ref$current === void 0 ? void 0 : _r$ref$current.contains(_item.ref.current);\n        }); // Group will be null if it's a one-dimensional composite\n\n\n        var nextItem = _objectSpread2({\n          groupId: _group2 === null || _group2 === void 0 ? void 0 : _group2.id\n        }, _item);\n\n        var _index = findDOMIndex(items, nextItem);\n\n        var nextState = _objectSpread2(_objectSpread2({}, state), {}, {\n          items: addItemAtIndex(items, nextItem, _index)\n        });\n\n        if (!hasSetCurrentId && !moves && initialCurrentId === undefined) {\n          var _findFirstEnabledItem; // Sets currentId to the first enabled item. This runs whenever an item\n          // is registered because the first enabled item may be registered\n          // asynchronously.\n\n\n          return _objectSpread2(_objectSpread2({}, nextState), {}, {\n            currentId: (_findFirstEnabledItem = findFirstEnabledItem(nextState.items)) === null || _findFirstEnabledItem === void 0 ? void 0 : _findFirstEnabledItem.id\n          });\n        }\n\n        return nextState;\n      }\n\n    case \"unregisterItem\":\n      {\n        var _id2 = action.id;\n        var nextItems = items.filter(function (item) {\n          return item.id !== _id2;\n        }); // The item isn't registered, so do nothing\n\n        if (nextItems.length === items.length) {\n          return state;\n        } // Filters out the item that is being removed from the pastIds list\n\n\n        var nextPastIds = pastIds.filter(function (pastId) {\n          return pastId !== _id2;\n        });\n\n        var _nextState = _objectSpread2(_objectSpread2({}, state), {}, {\n          pastIds: nextPastIds,\n          items: nextItems\n        }); // If the current item is the item that is being removed, focus pastId\n\n\n        if (currentId && currentId === _id2) {\n          var nextId = includesBaseElement ? null : getCurrentId(_objectSpread2(_objectSpread2({}, _nextState), {}, {\n            currentId: nextPastIds[0]\n          }));\n          return _objectSpread2(_objectSpread2({}, _nextState), {}, {\n            currentId: nextId\n          });\n        }\n\n        return _nextState;\n      }\n\n    case \"move\":\n      {\n        var _id3 = action.id; // move() does nothing\n\n        if (_id3 === undefined) {\n          return state;\n        } // Removes the current item and the item that is receiving focus from the\n        // pastIds list\n\n\n        var filteredPastIds = pastIds.filter(function (pastId) {\n          return pastId !== currentId && pastId !== _id3;\n        }); // If there's a currentId, add it to the pastIds list so it can be focused\n        // if the new item gets removed or disabled\n\n        var _nextPastIds = currentId ? [currentId].concat(filteredPastIds) : filteredPastIds;\n\n        var _nextState2 = _objectSpread2(_objectSpread2({}, state), {}, {\n          pastIds: _nextPastIds\n        }); // move(null) will focus the composite element itself, not an item\n\n\n        if (_id3 === null) {\n          return _objectSpread2(_objectSpread2({}, _nextState2), {}, {\n            unstable_moves: moves + 1,\n            currentId: getCurrentId(_nextState2, _id3)\n          });\n        }\n\n        var _item2 = findEnabledItemById(items, _id3);\n\n        return _objectSpread2(_objectSpread2({}, _nextState2), {}, {\n          unstable_moves: _item2 ? moves + 1 : moves,\n          currentId: getCurrentId(_nextState2, _item2 === null || _item2 === void 0 ? void 0 : _item2.id)\n        });\n      }\n\n    case \"next\":\n      {\n        // If there's no item focused, we just move the first one\n        if (currentId == null) {\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"first\"\n          }));\n        } // RTL doesn't make sense on vertical navigation\n\n\n        var isHorizontal = orientation !== \"vertical\";\n        var isRTL = rtl && isHorizontal;\n        var allItems = isRTL ? reverse(items) : items;\n        var currentItem = allItems.find(function (item) {\n          return item.id === currentId;\n        }); // If there's no item focused, we just move the first one\n\n        if (!currentItem) {\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"first\"\n          }));\n        }\n\n        var isGrid = !!currentItem.groupId;\n        var currentIndex = allItems.indexOf(currentItem);\n\n        var _nextItems = allItems.slice(currentIndex + 1);\n\n        var nextItemsInGroup = getItemsInGroup(_nextItems, currentItem.groupId); // Home, End\n\n        if (action.allTheWay) {\n          // We reverse so we can get the last enabled item in the group. If it's\n          // RTL, nextItems and nextItemsInGroup are already reversed and don't\n          // have the items before the current one anymore. So we have to get\n          // items in group again with allItems.\n          var _nextItem2 = findFirstEnabledItem(isRTL ? getItemsInGroup(allItems, currentItem.groupId) : reverse(nextItemsInGroup));\n\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"move\",\n            id: _nextItem2 === null || _nextItem2 === void 0 ? void 0 : _nextItem2.id\n          }));\n        }\n\n        var oppositeOrientation = getOppositeOrientation( // If it's a grid and orientation is not set, it's a next/previous\n        // call, which is inherently horizontal. up/down will call next with\n        // orientation set to vertical by default (see below on up/down cases).\n        isGrid ? orientation || \"horizontal\" : orientation);\n        var canLoop = loop && loop !== oppositeOrientation;\n        var canWrap = isGrid && wrap && wrap !== oppositeOrientation;\n        var hasNullItem = // `previous` and `up` will set action.hasNullItem, but when calling\n        // next directly, hasNullItem will only be true if it's not a grid and\n        // loop is set to true, which means that pressing right or down keys on\n        // grids will never focus the composite element. On one-dimensional\n        // composites that don't loop, pressing right or down keys also doesn't\n        // focus the composite element.\n        action.hasNullItem || !isGrid && canLoop && includesBaseElement;\n\n        if (canLoop) {\n          var loopItems = canWrap && !hasNullItem ? allItems : getItemsInGroup(allItems, currentItem.groupId); // Turns [0, 1, current, 3, 4] into [3, 4, 0, 1]\n\n          var sortedItems = placeItemsAfter(loopItems, currentId, hasNullItem);\n\n          var _nextItem3 = findFirstEnabledItem(sortedItems, currentId);\n\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"move\",\n            id: _nextItem3 === null || _nextItem3 === void 0 ? void 0 : _nextItem3.id\n          }));\n        }\n\n        if (canWrap) {\n          var _nextItem4 = findFirstEnabledItem( // We can use nextItems, which contains all the next items, including\n          // items from other groups, to wrap between groups. However, if there\n          // is a null item (the composite element), we'll only use the next\n          // items in the group. So moving next from the last item will focus\n          // the composite element (null). On grid composites, horizontal\n          // navigation never focuses the composite element, only vertical.\n          hasNullItem ? nextItemsInGroup : _nextItems, currentId);\n\n          var _nextId = hasNullItem ? (_nextItem4 === null || _nextItem4 === void 0 ? void 0 : _nextItem4.id) || null : _nextItem4 === null || _nextItem4 === void 0 ? void 0 : _nextItem4.id;\n\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"move\",\n            id: _nextId\n          }));\n        }\n\n        var _nextItem = findFirstEnabledItem(nextItemsInGroup, currentId);\n\n        if (!_nextItem && hasNullItem) {\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"move\",\n            id: null\n          }));\n        }\n\n        return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"move\",\n          id: _nextItem === null || _nextItem === void 0 ? void 0 : _nextItem.id\n        }));\n      }\n\n    case \"previous\":\n      {\n        // If currentId is initially set to null, the composite element will be\n        // focusable while navigating with arrow keys. But, if it's a grid, we\n        // don't want to focus the composite element with horizontal navigation.\n        var _isGrid = !!groups.length;\n\n        var _hasNullItem = !_isGrid && includesBaseElement;\n\n        var _nextState3 = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          items: reverse(items)\n        }), _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"next\",\n          hasNullItem: _hasNullItem\n        }));\n\n        return _objectSpread2(_objectSpread2({}, _nextState3), {}, {\n          items: items\n        });\n      }\n\n    case \"down\":\n      {\n        var shouldShift = shift && !action.allTheWay; // First, we make sure groups have the same number of items by filling it\n        // with disabled fake items. Then, we reorganize the items list so\n        // [1-1, 1-2, 2-1, 2-2] becomes [1-1, 2-1, 1-2, 2-2].\n\n        var verticalItems = verticalizeItems(flatten(fillGroups(groupItems(items), currentId, shouldShift)));\n\n        var _canLoop = loop && loop !== \"horizontal\"; // Pressing down arrow key will only focus the composite element if loop\n        // is true or vertical.\n\n\n        var _hasNullItem2 = _canLoop && includesBaseElement;\n\n        var _nextState4 = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          orientation: \"vertical\",\n          items: verticalItems\n        }), _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"next\",\n          hasNullItem: _hasNullItem2\n        }));\n\n        return _objectSpread2(_objectSpread2({}, _nextState4), {}, {\n          orientation: orientation,\n          items: items\n        });\n      }\n\n    case \"up\":\n      {\n        var _shouldShift = shift && !action.allTheWay;\n\n        var _verticalItems = verticalizeItems(reverse(flatten(fillGroups(groupItems(items), currentId, _shouldShift)))); // If currentId is initially set to null, we'll always focus the\n        // composite element when the up arrow key is pressed in the first row.\n\n\n        var _hasNullItem3 = includesBaseElement;\n\n        var _nextState5 = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          orientation: \"vertical\",\n          items: _verticalItems\n        }), _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"next\",\n          hasNullItem: _hasNullItem3\n        }));\n\n        return _objectSpread2(_objectSpread2({}, _nextState5), {}, {\n          orientation: orientation,\n          items: items\n        });\n      }\n\n    case \"first\":\n      {\n        var firstItem = findFirstEnabledItem(items);\n        return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"move\",\n          id: firstItem === null || firstItem === void 0 ? void 0 : firstItem.id\n        }));\n      }\n\n    case \"last\":\n      {\n        var _nextState6 = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          items: reverse(items)\n        }), _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"first\"\n        }));\n\n        return _objectSpread2(_objectSpread2({}, _nextState6), {}, {\n          items: items\n        });\n      }\n\n    case \"sort\":\n      {\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          items: sortBasedOnDOMPosition(items),\n          groups: sortBasedOnDOMPosition(groups)\n        });\n      }\n\n    case \"setVirtual\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        unstable_virtual: applyState(action.virtual, virtual)\n      });\n\n    case \"setRTL\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        rtl: applyState(action.rtl, rtl)\n      });\n\n    case \"setOrientation\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        orientation: applyState(action.orientation, orientation)\n      });\n\n    case \"setCurrentId\":\n      {\n        var nextCurrentId = getCurrentId(_objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: applyState(action.currentId, currentId)\n        }));\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: nextCurrentId,\n          hasSetCurrentId: true\n        });\n      }\n\n    case \"setLoop\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        loop: applyState(action.loop, loop)\n      });\n\n    case \"setWrap\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        wrap: applyState(action.wrap, wrap)\n      });\n\n    case \"setShift\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        shift: applyState(action.shift, shift)\n      });\n\n    case \"setIncludesBaseElement\":\n      {\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          unstable_includesBaseElement: applyState(action.includesBaseElement, includesBaseElement)\n        });\n      }\n\n    case \"reset\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        unstable_virtual: initialVirtual,\n        rtl: initialRTL,\n        orientation: initialOrientation,\n        currentId: getCurrentId(_objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: initialCurrentId\n        })),\n        loop: initialLoop,\n        wrap: initialWrap,\n        shift: initialShift,\n        unstable_moves: 0,\n        pastIds: []\n      });\n\n    case \"setItems\":\n      {\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          items: action.items\n        });\n      }\n\n    default:\n      throw new Error();\n  }\n}\n\nfunction useAction(fn) {\n  return useCallback(fn, []);\n}\n\nfunction useIsUnmountedRef() {\n  var isUnmountedRef = useRef(false);\n  useIsomorphicEffect(function () {\n    return function () {\n      isUnmountedRef.current = true;\n    };\n  }, []);\n  return isUnmountedRef;\n}\n\nfunction useCompositeState(initialState) {\n  if (initialState === void 0) {\n    initialState = {};\n  }\n\n  var _useSealedState = useSealedState(initialState),\n      _useSealedState$unsta = _useSealedState.unstable_virtual,\n      virtual = _useSealedState$unsta === void 0 ? false : _useSealedState$unsta,\n      _useSealedState$rtl = _useSealedState.rtl,\n      rtl = _useSealedState$rtl === void 0 ? false : _useSealedState$rtl,\n      orientation = _useSealedState.orientation,\n      currentId = _useSealedState.currentId,\n      _useSealedState$loop = _useSealedState.loop,\n      loop = _useSealedState$loop === void 0 ? false : _useSealedState$loop,\n      _useSealedState$wrap = _useSealedState.wrap,\n      wrap = _useSealedState$wrap === void 0 ? false : _useSealedState$wrap,\n      _useSealedState$shift = _useSealedState.shift,\n      shift = _useSealedState$shift === void 0 ? false : _useSealedState$shift,\n      unstable_includesBaseElement = _useSealedState.unstable_includesBaseElement,\n      sealed = _objectWithoutPropertiesLoose(_useSealedState, [\"unstable_virtual\", \"rtl\", \"orientation\", \"currentId\", \"loop\", \"wrap\", \"shift\", \"unstable_includesBaseElement\"]);\n\n  var idState = unstable_useIdState(sealed);\n\n  var _React$useReducer = useReducer(reducer, {\n    unstable_virtual: virtual,\n    rtl: rtl,\n    orientation: orientation,\n    items: [],\n    groups: [],\n    currentId: currentId,\n    loop: loop,\n    wrap: wrap,\n    shift: shift,\n    unstable_moves: 0,\n    pastIds: [],\n    unstable_includesBaseElement: unstable_includesBaseElement != null ? unstable_includesBaseElement : currentId === null,\n    initialVirtual: virtual,\n    initialRTL: rtl,\n    initialOrientation: orientation,\n    initialCurrentId: currentId,\n    initialLoop: loop,\n    initialWrap: wrap,\n    initialShift: shift\n  }),\n      _React$useReducer$ = _React$useReducer[0],\n      pastIds = _React$useReducer$.pastIds,\n      initialVirtual = _React$useReducer$.initialVirtual,\n      initialRTL = _React$useReducer$.initialRTL,\n      initialOrientation = _React$useReducer$.initialOrientation,\n      initialCurrentId = _React$useReducer$.initialCurrentId,\n      initialLoop = _React$useReducer$.initialLoop,\n      initialWrap = _React$useReducer$.initialWrap,\n      initialShift = _React$useReducer$.initialShift,\n      hasSetCurrentId = _React$useReducer$.hasSetCurrentId,\n      state = _objectWithoutPropertiesLoose(_React$useReducer$, [\"pastIds\", \"initialVirtual\", \"initialRTL\", \"initialOrientation\", \"initialCurrentId\", \"initialLoop\", \"initialWrap\", \"initialShift\", \"hasSetCurrentId\"]),\n      dispatch = _React$useReducer[1];\n\n  var _React$useState = useState(false),\n      hasActiveWidget = _React$useState[0],\n      setHasActiveWidget = _React$useState[1]; // register/unregister may be called when this component is unmounted. We\n  // store the unmounted state here so we don't update the state if it's true.\n  // This only happens in a very specific situation.\n  // See https://github.com/reakit/reakit/issues/650\n\n\n  var isUnmountedRef = useIsUnmountedRef();\n  var setItems = useCallback(function (items) {\n    return dispatch({\n      type: \"setItems\",\n      items: items\n    });\n  }, []);\n  useSortBasedOnDOMPosition(state.items, setItems);\n  return _objectSpread2(_objectSpread2(_objectSpread2({}, idState), state), {}, {\n    unstable_hasActiveWidget: hasActiveWidget,\n    unstable_setHasActiveWidget: setHasActiveWidget,\n    registerItem: useAction(function (item) {\n      if (isUnmountedRef.current) return;\n      dispatch({\n        type: \"registerItem\",\n        item: item\n      });\n    }),\n    unregisterItem: useAction(function (id) {\n      if (isUnmountedRef.current) return;\n      dispatch({\n        type: \"unregisterItem\",\n        id: id\n      });\n    }),\n    registerGroup: useAction(function (group) {\n      if (isUnmountedRef.current) return;\n      dispatch({\n        type: \"registerGroup\",\n        group: group\n      });\n    }),\n    unregisterGroup: useAction(function (id) {\n      if (isUnmountedRef.current) return;\n      dispatch({\n        type: \"unregisterGroup\",\n        id: id\n      });\n    }),\n    move: useAction(function (id) {\n      return dispatch({\n        type: \"move\",\n        id: id\n      });\n    }),\n    next: useAction(function (allTheWay) {\n      return dispatch({\n        type: \"next\",\n        allTheWay: allTheWay\n      });\n    }),\n    previous: useAction(function (allTheWay) {\n      return dispatch({\n        type: \"previous\",\n        allTheWay: allTheWay\n      });\n    }),\n    up: useAction(function (allTheWay) {\n      return dispatch({\n        type: \"up\",\n        allTheWay: allTheWay\n      });\n    }),\n    down: useAction(function (allTheWay) {\n      return dispatch({\n        type: \"down\",\n        allTheWay: allTheWay\n      });\n    }),\n    first: useAction(function () {\n      return dispatch({\n        type: \"first\"\n      });\n    }),\n    last: useAction(function () {\n      return dispatch({\n        type: \"last\"\n      });\n    }),\n    sort: useAction(function () {\n      return dispatch({\n        type: \"sort\"\n      });\n    }),\n    unstable_setVirtual: useAction(function (value) {\n      return dispatch({\n        type: \"setVirtual\",\n        virtual: value\n      });\n    }),\n    setRTL: useAction(function (value) {\n      return dispatch({\n        type: \"setRTL\",\n        rtl: value\n      });\n    }),\n    setOrientation: useAction(function (value) {\n      return dispatch({\n        type: \"setOrientation\",\n        orientation: value\n      });\n    }),\n    setCurrentId: useAction(function (value) {\n      return dispatch({\n        type: \"setCurrentId\",\n        currentId: value\n      });\n    }),\n    setLoop: useAction(function (value) {\n      return dispatch({\n        type: \"setLoop\",\n        loop: value\n      });\n    }),\n    setWrap: useAction(function (value) {\n      return dispatch({\n        type: \"setWrap\",\n        wrap: value\n      });\n    }),\n    setShift: useAction(function (value) {\n      return dispatch({\n        type: \"setShift\",\n        shift: value\n      });\n    }),\n    unstable_setIncludesBaseElement: useAction(function (value) {\n      return dispatch({\n        type: \"setIncludesBaseElement\",\n        includesBaseElement: value\n      });\n    }),\n    reset: useAction(function () {\n      return dispatch({\n        type: \"reset\"\n      });\n    })\n  });\n}\n\nexport { useCompositeState };","map":{"version":3,"sources":["/Users/davimello/Creative Cloud Files/Davi/code/portfolio-react/node_modules/reakit/es/Composite/CompositeState.js"],"names":["b","_createForOfIteratorHelperLoose","a","_objectSpread2","_","_objectWithoutPropertiesLoose","useRef","useEffect","useReducer","useState","useCallback","useIsomorphicEffect","useSealedState","g","groupItems","r","reverse","f","flatten","findFirstEnabledItem","getCurrentId","findEnabledItemById","applyState","unstable_useIdState","isElementPreceding","element1","element2","Boolean","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","findDOMIndex","items","item","findIndex","currentItem","ref","current","getMaxLength","rows","maxLength","_iterator","_step","done","length","value","verticalizeItems","groups","verticalized","i","group","push","groupId","undefined","createEmptyItem","id","disabled","fillGroups","currentId","shift","isFrist","previousItem","nullItem","placeItemsAfter","shouldInsertNullItem","index","concat","slice","getItemsInGroup","filter","map","horizontal","vertical","getOppositeOrientation","orientation","addItemAtIndex","array","sortBasedOnDOMPosition","pairs","isOrderDifferent","sort","_ref","_ref2","indexA","indexB","elementA","elementB","_ref3","setItemsBasedOnDOMPosition","setItems","sortedItems","useIntersectionObserver","previousItems","callback","hasPreviousItems","observer","IntersectionObserver","root","document","body","observe","disconnect","useTimeoutObserver","timeout","setTimeout","clearTimeout","useSortBasedOnDOMPosition","reducer","state","action","virtual","unstable_virtual","rtl","loop","wrap","pastIds","moves","unstable_moves","includesBaseElement","unstable_includesBaseElement","initialVirtual","initialRTL","initialOrientation","initialCurrentId","initialLoop","initialWrap","initialShift","hasSetCurrentId","type","_group","_id","nextGroups","_item","_group2","find","_r$ref$current","contains","nextItem","_index","nextState","_findFirstEnabledItem","_id2","nextItems","nextPastIds","pastId","_nextState","nextId","_id3","filteredPastIds","_nextPastIds","_nextState2","_item2","isHorizontal","isRTL","allItems","isGrid","currentIndex","indexOf","_nextItems","nextItemsInGroup","allTheWay","_nextItem2","oppositeOrientation","canLoop","canWrap","hasNullItem","loopItems","_nextItem3","_nextItem4","_nextId","_nextItem","_isGrid","_hasNullItem","_nextState3","shouldShift","verticalItems","_canLoop","_hasNullItem2","_nextState4","_shouldShift","_verticalItems","_hasNullItem3","_nextState5","firstItem","_nextState6","nextCurrentId","Error","useAction","fn","useIsUnmountedRef","isUnmountedRef","useCompositeState","initialState","_useSealedState","_useSealedState$unsta","_useSealedState$rtl","_useSealedState$loop","_useSealedState$wrap","_useSealedState$shift","sealed","idState","_React$useReducer","_React$useReducer$","dispatch","_React$useState","hasActiveWidget","setHasActiveWidget","unstable_hasActiveWidget","unstable_setHasActiveWidget","registerItem","unregisterItem","registerGroup","unregisterGroup","move","next","previous","up","down","first","last","unstable_setVirtual","setRTL","setOrientation","setCurrentId","setLoop","setWrap","setShift","unstable_setIncludesBaseElement","reset"],"mappings":"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","sourcesContent":["import { b as _createForOfIteratorHelperLoose, a as _objectSpread2, _ as _objectWithoutPropertiesLoose } from '../_rollupPluginBabelHelpers-1f0bf8c2.js';\nimport { useRef, useEffect, useReducer, useState, useCallback } from 'react';\nimport { useIsomorphicEffect } from 'reakit-utils/useIsomorphicEffect';\nimport { useSealedState } from 'reakit-utils/useSealedState';\nimport { g as groupItems, r as reverse, f as flatten } from '../reverse-30eaa122.js';\nimport { f as findFirstEnabledItem, g as getCurrentId } from '../getCurrentId-5aa9849e.js';\nimport { f as findEnabledItemById } from '../findEnabledItemById-8ddca752.js';\nimport '../Id/IdProvider.js';\nimport { applyState } from 'reakit-utils/applyState';\nimport { unstable_useIdState } from '../Id/IdState.js';\n\nfunction isElementPreceding(element1, element2) {\n  return Boolean(element2.compareDocumentPosition(element1) & Node.DOCUMENT_POSITION_PRECEDING);\n}\n\nfunction findDOMIndex(items, item) {\n  return items.findIndex(function (currentItem) {\n    if (!currentItem.ref.current || !item.ref.current) {\n      return false;\n    }\n\n    return isElementPreceding(item.ref.current, currentItem.ref.current);\n  });\n}\n\nfunction getMaxLength(rows) {\n  var maxLength = 0;\n\n  for (var _iterator = _createForOfIteratorHelperLoose(rows), _step; !(_step = _iterator()).done;) {\n    var length = _step.value.length;\n\n    if (length > maxLength) {\n      maxLength = length;\n    }\n  }\n\n  return maxLength;\n}\n\n/**\n * Turns [row1, row1, row2, row2] into [row1, row2, row1, row2]\n */\n\nfunction verticalizeItems(items) {\n  var groups = groupItems(items);\n  var maxLength = getMaxLength(groups);\n  var verticalized = [];\n\n  for (var i = 0; i < maxLength; i += 1) {\n    for (var _iterator = _createForOfIteratorHelperLoose(groups), _step; !(_step = _iterator()).done;) {\n      var group = _step.value;\n\n      if (group[i]) {\n        verticalized.push(_objectSpread2(_objectSpread2({}, group[i]), {}, {\n          // If there's no groupId, it means that it's not a grid composite,\n          // but a single row instead. So, instead of verticalizing it, that\n          // is, assigning a different groupId based on the column index, we\n          // keep it undefined so they will be part of the same group.\n          // It's useful when using up/down on one-dimensional composites.\n          groupId: group[i].groupId ? \"\" + i : undefined\n        }));\n      }\n    }\n  }\n\n  return verticalized;\n}\n\nfunction createEmptyItem(groupId) {\n  return {\n    id: \"__EMPTY_ITEM__\",\n    disabled: true,\n    ref: {\n      current: null\n    },\n    groupId: groupId\n  };\n}\n/**\n * Turns [[row1, row1], [row2]] into [[row1, row1], [row2, row2]]\n */\n\n\nfunction fillGroups(groups, currentId, shift) {\n  var maxLength = getMaxLength(groups);\n\n  for (var _iterator = _createForOfIteratorHelperLoose(groups), _step; !(_step = _iterator()).done;) {\n    var group = _step.value;\n\n    for (var i = 0; i < maxLength; i += 1) {\n      var item = group[i];\n\n      if (!item || shift && item.disabled) {\n        var isFrist = i === 0;\n        var previousItem = isFrist && shift ? findFirstEnabledItem(group) : group[i - 1];\n        group[i] = previousItem && currentId !== (previousItem === null || previousItem === void 0 ? void 0 : previousItem.id) && shift ? previousItem : createEmptyItem(previousItem === null || previousItem === void 0 ? void 0 : previousItem.groupId);\n      }\n    }\n  }\n\n  return groups;\n}\n\nvar nullItem = {\n  id: null,\n  ref: {\n    current: null\n  }\n};\nfunction placeItemsAfter(items, id, shouldInsertNullItem) {\n  var index = items.findIndex(function (item) {\n    return item.id === id;\n  });\n  return [].concat(items.slice(index + 1), shouldInsertNullItem ? [nullItem] : [], items.slice(0, index));\n}\n\nfunction getItemsInGroup(items, groupId) {\n  return items.filter(function (item) {\n    return item.groupId === groupId;\n  });\n}\n\nvar map = {\n  horizontal: \"vertical\",\n  vertical: \"horizontal\"\n};\nfunction getOppositeOrientation(orientation) {\n  return orientation && map[orientation];\n}\n\nfunction addItemAtIndex(array, item, index) {\n  if (!(index in array)) {\n    return [].concat(array, [item]);\n  }\n\n  return [].concat(array.slice(0, index), [item], array.slice(index));\n}\n\nfunction sortBasedOnDOMPosition(items) {\n  var pairs = items.map(function (item, index) {\n    return [index, item];\n  });\n  var isOrderDifferent = false;\n  pairs.sort(function (_ref, _ref2) {\n    var indexA = _ref[0],\n        a = _ref[1];\n    var indexB = _ref2[0],\n        b = _ref2[1];\n    var elementA = a.ref.current;\n    var elementB = b.ref.current;\n    if (!elementA || !elementB) return 0; // a before b\n\n    if (isElementPreceding(elementA, elementB)) {\n      if (indexA > indexB) {\n        isOrderDifferent = true;\n      }\n\n      return -1;\n    } // a after b\n\n\n    if (indexA < indexB) {\n      isOrderDifferent = true;\n    }\n\n    return 1;\n  });\n\n  if (isOrderDifferent) {\n    return pairs.map(function (_ref3) {\n      var _ = _ref3[0],\n          item = _ref3[1];\n      return item;\n    });\n  }\n\n  return items;\n}\n\nfunction setItemsBasedOnDOMPosition(items, setItems) {\n  var sortedItems = sortBasedOnDOMPosition(items);\n\n  if (items !== sortedItems) {\n    setItems(sortedItems);\n  }\n} // istanbul ignore next: JSDOM doesn't support IntersectionObverser\n// See https://github.com/jsdom/jsdom/issues/2032\n\n\nfunction useIntersectionObserver(items, setItems) {\n  var previousItems = useRef([]);\n  useEffect(function () {\n    var callback = function callback() {\n      var hasPreviousItems = !!previousItems.current.length; // We don't want to sort items if items have been just registered.\n\n      if (hasPreviousItems) {\n        setItemsBasedOnDOMPosition(items, setItems);\n      }\n\n      previousItems.current = items;\n    };\n\n    var observer = new IntersectionObserver(callback, {\n      root: document.body\n    });\n\n    for (var _iterator = _createForOfIteratorHelperLoose(items), _step; !(_step = _iterator()).done;) {\n      var item = _step.value;\n\n      if (item.ref.current) {\n        observer.observe(item.ref.current);\n      }\n    }\n\n    return function () {\n      observer.disconnect();\n    };\n  }, [items]);\n}\n\nfunction useTimeoutObserver(items, setItems) {\n  useEffect(function () {\n    var callback = function callback() {\n      return setItemsBasedOnDOMPosition(items, setItems);\n    };\n\n    var timeout = setTimeout(callback, 250);\n    return function () {\n      return clearTimeout(timeout);\n    };\n  });\n}\n\nfunction useSortBasedOnDOMPosition(items, setItems) {\n  if (typeof IntersectionObserver === \"function\") {\n    useIntersectionObserver(items, setItems);\n  } else {\n    useTimeoutObserver(items, setItems);\n  }\n}\n\nfunction reducer(state, action) {\n  var virtual = state.unstable_virtual,\n      rtl = state.rtl,\n      orientation = state.orientation,\n      items = state.items,\n      groups = state.groups,\n      currentId = state.currentId,\n      loop = state.loop,\n      wrap = state.wrap,\n      pastIds = state.pastIds,\n      shift = state.shift,\n      moves = state.unstable_moves,\n      includesBaseElement = state.unstable_includesBaseElement,\n      initialVirtual = state.initialVirtual,\n      initialRTL = state.initialRTL,\n      initialOrientation = state.initialOrientation,\n      initialCurrentId = state.initialCurrentId,\n      initialLoop = state.initialLoop,\n      initialWrap = state.initialWrap,\n      initialShift = state.initialShift,\n      hasSetCurrentId = state.hasSetCurrentId;\n\n  switch (action.type) {\n    case \"registerGroup\":\n      {\n        var _group = action.group; // If there are no groups yet, just add it as the first one\n\n        if (groups.length === 0) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            groups: [_group]\n          });\n        } // Finds the group index based on DOM position\n\n\n        var index = findDOMIndex(groups, _group);\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          groups: addItemAtIndex(groups, _group, index)\n        });\n      }\n\n    case \"unregisterGroup\":\n      {\n        var _id = action.id;\n        var nextGroups = groups.filter(function (group) {\n          return group.id !== _id;\n        }); // The group isn't registered, so do nothing\n\n        if (nextGroups.length === groups.length) {\n          return state;\n        }\n\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          groups: nextGroups\n        });\n      }\n\n    case \"registerItem\":\n      {\n        var _item = action.item; // Finds the item group based on the DOM hierarchy\n\n        var _group2 = groups.find(function (r) {\n          var _r$ref$current;\n\n          return (_r$ref$current = r.ref.current) === null || _r$ref$current === void 0 ? void 0 : _r$ref$current.contains(_item.ref.current);\n        }); // Group will be null if it's a one-dimensional composite\n\n\n        var nextItem = _objectSpread2({\n          groupId: _group2 === null || _group2 === void 0 ? void 0 : _group2.id\n        }, _item);\n\n        var _index = findDOMIndex(items, nextItem);\n\n        var nextState = _objectSpread2(_objectSpread2({}, state), {}, {\n          items: addItemAtIndex(items, nextItem, _index)\n        });\n\n        if (!hasSetCurrentId && !moves && initialCurrentId === undefined) {\n          var _findFirstEnabledItem;\n\n          // Sets currentId to the first enabled item. This runs whenever an item\n          // is registered because the first enabled item may be registered\n          // asynchronously.\n          return _objectSpread2(_objectSpread2({}, nextState), {}, {\n            currentId: (_findFirstEnabledItem = findFirstEnabledItem(nextState.items)) === null || _findFirstEnabledItem === void 0 ? void 0 : _findFirstEnabledItem.id\n          });\n        }\n\n        return nextState;\n      }\n\n    case \"unregisterItem\":\n      {\n        var _id2 = action.id;\n        var nextItems = items.filter(function (item) {\n          return item.id !== _id2;\n        }); // The item isn't registered, so do nothing\n\n        if (nextItems.length === items.length) {\n          return state;\n        } // Filters out the item that is being removed from the pastIds list\n\n\n        var nextPastIds = pastIds.filter(function (pastId) {\n          return pastId !== _id2;\n        });\n\n        var _nextState = _objectSpread2(_objectSpread2({}, state), {}, {\n          pastIds: nextPastIds,\n          items: nextItems\n        }); // If the current item is the item that is being removed, focus pastId\n\n\n        if (currentId && currentId === _id2) {\n          var nextId = includesBaseElement ? null : getCurrentId(_objectSpread2(_objectSpread2({}, _nextState), {}, {\n            currentId: nextPastIds[0]\n          }));\n          return _objectSpread2(_objectSpread2({}, _nextState), {}, {\n            currentId: nextId\n          });\n        }\n\n        return _nextState;\n      }\n\n    case \"move\":\n      {\n        var _id3 = action.id; // move() does nothing\n\n        if (_id3 === undefined) {\n          return state;\n        } // Removes the current item and the item that is receiving focus from the\n        // pastIds list\n\n\n        var filteredPastIds = pastIds.filter(function (pastId) {\n          return pastId !== currentId && pastId !== _id3;\n        }); // If there's a currentId, add it to the pastIds list so it can be focused\n        // if the new item gets removed or disabled\n\n        var _nextPastIds = currentId ? [currentId].concat(filteredPastIds) : filteredPastIds;\n\n        var _nextState2 = _objectSpread2(_objectSpread2({}, state), {}, {\n          pastIds: _nextPastIds\n        }); // move(null) will focus the composite element itself, not an item\n\n\n        if (_id3 === null) {\n          return _objectSpread2(_objectSpread2({}, _nextState2), {}, {\n            unstable_moves: moves + 1,\n            currentId: getCurrentId(_nextState2, _id3)\n          });\n        }\n\n        var _item2 = findEnabledItemById(items, _id3);\n\n        return _objectSpread2(_objectSpread2({}, _nextState2), {}, {\n          unstable_moves: _item2 ? moves + 1 : moves,\n          currentId: getCurrentId(_nextState2, _item2 === null || _item2 === void 0 ? void 0 : _item2.id)\n        });\n      }\n\n    case \"next\":\n      {\n        // If there's no item focused, we just move the first one\n        if (currentId == null) {\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"first\"\n          }));\n        } // RTL doesn't make sense on vertical navigation\n\n\n        var isHorizontal = orientation !== \"vertical\";\n        var isRTL = rtl && isHorizontal;\n        var allItems = isRTL ? reverse(items) : items;\n        var currentItem = allItems.find(function (item) {\n          return item.id === currentId;\n        }); // If there's no item focused, we just move the first one\n\n        if (!currentItem) {\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"first\"\n          }));\n        }\n\n        var isGrid = !!currentItem.groupId;\n        var currentIndex = allItems.indexOf(currentItem);\n\n        var _nextItems = allItems.slice(currentIndex + 1);\n\n        var nextItemsInGroup = getItemsInGroup(_nextItems, currentItem.groupId); // Home, End\n\n        if (action.allTheWay) {\n          // We reverse so we can get the last enabled item in the group. If it's\n          // RTL, nextItems and nextItemsInGroup are already reversed and don't\n          // have the items before the current one anymore. So we have to get\n          // items in group again with allItems.\n          var _nextItem2 = findFirstEnabledItem(isRTL ? getItemsInGroup(allItems, currentItem.groupId) : reverse(nextItemsInGroup));\n\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"move\",\n            id: _nextItem2 === null || _nextItem2 === void 0 ? void 0 : _nextItem2.id\n          }));\n        }\n\n        var oppositeOrientation = getOppositeOrientation( // If it's a grid and orientation is not set, it's a next/previous\n        // call, which is inherently horizontal. up/down will call next with\n        // orientation set to vertical by default (see below on up/down cases).\n        isGrid ? orientation || \"horizontal\" : orientation);\n        var canLoop = loop && loop !== oppositeOrientation;\n        var canWrap = isGrid && wrap && wrap !== oppositeOrientation;\n        var hasNullItem = // `previous` and `up` will set action.hasNullItem, but when calling\n        // next directly, hasNullItem will only be true if it's not a grid and\n        // loop is set to true, which means that pressing right or down keys on\n        // grids will never focus the composite element. On one-dimensional\n        // composites that don't loop, pressing right or down keys also doesn't\n        // focus the composite element.\n        action.hasNullItem || !isGrid && canLoop && includesBaseElement;\n\n        if (canLoop) {\n          var loopItems = canWrap && !hasNullItem ? allItems : getItemsInGroup(allItems, currentItem.groupId); // Turns [0, 1, current, 3, 4] into [3, 4, 0, 1]\n\n          var sortedItems = placeItemsAfter(loopItems, currentId, hasNullItem);\n\n          var _nextItem3 = findFirstEnabledItem(sortedItems, currentId);\n\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"move\",\n            id: _nextItem3 === null || _nextItem3 === void 0 ? void 0 : _nextItem3.id\n          }));\n        }\n\n        if (canWrap) {\n          var _nextItem4 = findFirstEnabledItem( // We can use nextItems, which contains all the next items, including\n          // items from other groups, to wrap between groups. However, if there\n          // is a null item (the composite element), we'll only use the next\n          // items in the group. So moving next from the last item will focus\n          // the composite element (null). On grid composites, horizontal\n          // navigation never focuses the composite element, only vertical.\n          hasNullItem ? nextItemsInGroup : _nextItems, currentId);\n\n          var _nextId = hasNullItem ? (_nextItem4 === null || _nextItem4 === void 0 ? void 0 : _nextItem4.id) || null : _nextItem4 === null || _nextItem4 === void 0 ? void 0 : _nextItem4.id;\n\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"move\",\n            id: _nextId\n          }));\n        }\n\n        var _nextItem = findFirstEnabledItem(nextItemsInGroup, currentId);\n\n        if (!_nextItem && hasNullItem) {\n          return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n            type: \"move\",\n            id: null\n          }));\n        }\n\n        return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"move\",\n          id: _nextItem === null || _nextItem === void 0 ? void 0 : _nextItem.id\n        }));\n      }\n\n    case \"previous\":\n      {\n        // If currentId is initially set to null, the composite element will be\n        // focusable while navigating with arrow keys. But, if it's a grid, we\n        // don't want to focus the composite element with horizontal navigation.\n        var _isGrid = !!groups.length;\n\n        var _hasNullItem = !_isGrid && includesBaseElement;\n\n        var _nextState3 = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          items: reverse(items)\n        }), _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"next\",\n          hasNullItem: _hasNullItem\n        }));\n\n        return _objectSpread2(_objectSpread2({}, _nextState3), {}, {\n          items: items\n        });\n      }\n\n    case \"down\":\n      {\n        var shouldShift = shift && !action.allTheWay; // First, we make sure groups have the same number of items by filling it\n        // with disabled fake items. Then, we reorganize the items list so\n        // [1-1, 1-2, 2-1, 2-2] becomes [1-1, 2-1, 1-2, 2-2].\n\n        var verticalItems = verticalizeItems(flatten(fillGroups(groupItems(items), currentId, shouldShift)));\n\n        var _canLoop = loop && loop !== \"horizontal\"; // Pressing down arrow key will only focus the composite element if loop\n        // is true or vertical.\n\n\n        var _hasNullItem2 = _canLoop && includesBaseElement;\n\n        var _nextState4 = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          orientation: \"vertical\",\n          items: verticalItems\n        }), _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"next\",\n          hasNullItem: _hasNullItem2\n        }));\n\n        return _objectSpread2(_objectSpread2({}, _nextState4), {}, {\n          orientation: orientation,\n          items: items\n        });\n      }\n\n    case \"up\":\n      {\n        var _shouldShift = shift && !action.allTheWay;\n\n        var _verticalItems = verticalizeItems(reverse(flatten(fillGroups(groupItems(items), currentId, _shouldShift)))); // If currentId is initially set to null, we'll always focus the\n        // composite element when the up arrow key is pressed in the first row.\n\n\n        var _hasNullItem3 = includesBaseElement;\n\n        var _nextState5 = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          orientation: \"vertical\",\n          items: _verticalItems\n        }), _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"next\",\n          hasNullItem: _hasNullItem3\n        }));\n\n        return _objectSpread2(_objectSpread2({}, _nextState5), {}, {\n          orientation: orientation,\n          items: items\n        });\n      }\n\n    case \"first\":\n      {\n        var firstItem = findFirstEnabledItem(items);\n        return reducer(state, _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"move\",\n          id: firstItem === null || firstItem === void 0 ? void 0 : firstItem.id\n        }));\n      }\n\n    case \"last\":\n      {\n        var _nextState6 = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          items: reverse(items)\n        }), _objectSpread2(_objectSpread2({}, action), {}, {\n          type: \"first\"\n        }));\n\n        return _objectSpread2(_objectSpread2({}, _nextState6), {}, {\n          items: items\n        });\n      }\n\n    case \"sort\":\n      {\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          items: sortBasedOnDOMPosition(items),\n          groups: sortBasedOnDOMPosition(groups)\n        });\n      }\n\n    case \"setVirtual\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        unstable_virtual: applyState(action.virtual, virtual)\n      });\n\n    case \"setRTL\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        rtl: applyState(action.rtl, rtl)\n      });\n\n    case \"setOrientation\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        orientation: applyState(action.orientation, orientation)\n      });\n\n    case \"setCurrentId\":\n      {\n        var nextCurrentId = getCurrentId(_objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: applyState(action.currentId, currentId)\n        }));\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: nextCurrentId,\n          hasSetCurrentId: true\n        });\n      }\n\n    case \"setLoop\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        loop: applyState(action.loop, loop)\n      });\n\n    case \"setWrap\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        wrap: applyState(action.wrap, wrap)\n      });\n\n    case \"setShift\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        shift: applyState(action.shift, shift)\n      });\n\n    case \"setIncludesBaseElement\":\n      {\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          unstable_includesBaseElement: applyState(action.includesBaseElement, includesBaseElement)\n        });\n      }\n\n    case \"reset\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        unstable_virtual: initialVirtual,\n        rtl: initialRTL,\n        orientation: initialOrientation,\n        currentId: getCurrentId(_objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: initialCurrentId\n        })),\n        loop: initialLoop,\n        wrap: initialWrap,\n        shift: initialShift,\n        unstable_moves: 0,\n        pastIds: []\n      });\n\n    case \"setItems\":\n      {\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          items: action.items\n        });\n      }\n\n    default:\n      throw new Error();\n  }\n}\n\nfunction useAction(fn) {\n  return useCallback(fn, []);\n}\n\nfunction useIsUnmountedRef() {\n  var isUnmountedRef = useRef(false);\n  useIsomorphicEffect(function () {\n    return function () {\n      isUnmountedRef.current = true;\n    };\n  }, []);\n  return isUnmountedRef;\n}\n\nfunction useCompositeState(initialState) {\n  if (initialState === void 0) {\n    initialState = {};\n  }\n\n  var _useSealedState = useSealedState(initialState),\n      _useSealedState$unsta = _useSealedState.unstable_virtual,\n      virtual = _useSealedState$unsta === void 0 ? false : _useSealedState$unsta,\n      _useSealedState$rtl = _useSealedState.rtl,\n      rtl = _useSealedState$rtl === void 0 ? false : _useSealedState$rtl,\n      orientation = _useSealedState.orientation,\n      currentId = _useSealedState.currentId,\n      _useSealedState$loop = _useSealedState.loop,\n      loop = _useSealedState$loop === void 0 ? false : _useSealedState$loop,\n      _useSealedState$wrap = _useSealedState.wrap,\n      wrap = _useSealedState$wrap === void 0 ? false : _useSealedState$wrap,\n      _useSealedState$shift = _useSealedState.shift,\n      shift = _useSealedState$shift === void 0 ? false : _useSealedState$shift,\n      unstable_includesBaseElement = _useSealedState.unstable_includesBaseElement,\n      sealed = _objectWithoutPropertiesLoose(_useSealedState, [\"unstable_virtual\", \"rtl\", \"orientation\", \"currentId\", \"loop\", \"wrap\", \"shift\", \"unstable_includesBaseElement\"]);\n\n  var idState = unstable_useIdState(sealed);\n\n  var _React$useReducer = useReducer(reducer, {\n    unstable_virtual: virtual,\n    rtl: rtl,\n    orientation: orientation,\n    items: [],\n    groups: [],\n    currentId: currentId,\n    loop: loop,\n    wrap: wrap,\n    shift: shift,\n    unstable_moves: 0,\n    pastIds: [],\n    unstable_includesBaseElement: unstable_includesBaseElement != null ? unstable_includesBaseElement : currentId === null,\n    initialVirtual: virtual,\n    initialRTL: rtl,\n    initialOrientation: orientation,\n    initialCurrentId: currentId,\n    initialLoop: loop,\n    initialWrap: wrap,\n    initialShift: shift\n  }),\n      _React$useReducer$ = _React$useReducer[0],\n      pastIds = _React$useReducer$.pastIds,\n      initialVirtual = _React$useReducer$.initialVirtual,\n      initialRTL = _React$useReducer$.initialRTL,\n      initialOrientation = _React$useReducer$.initialOrientation,\n      initialCurrentId = _React$useReducer$.initialCurrentId,\n      initialLoop = _React$useReducer$.initialLoop,\n      initialWrap = _React$useReducer$.initialWrap,\n      initialShift = _React$useReducer$.initialShift,\n      hasSetCurrentId = _React$useReducer$.hasSetCurrentId,\n      state = _objectWithoutPropertiesLoose(_React$useReducer$, [\"pastIds\", \"initialVirtual\", \"initialRTL\", \"initialOrientation\", \"initialCurrentId\", \"initialLoop\", \"initialWrap\", \"initialShift\", \"hasSetCurrentId\"]),\n      dispatch = _React$useReducer[1];\n\n  var _React$useState = useState(false),\n      hasActiveWidget = _React$useState[0],\n      setHasActiveWidget = _React$useState[1]; // register/unregister may be called when this component is unmounted. We\n  // store the unmounted state here so we don't update the state if it's true.\n  // This only happens in a very specific situation.\n  // See https://github.com/reakit/reakit/issues/650\n\n\n  var isUnmountedRef = useIsUnmountedRef();\n  var setItems = useCallback(function (items) {\n    return dispatch({\n      type: \"setItems\",\n      items: items\n    });\n  }, []);\n  useSortBasedOnDOMPosition(state.items, setItems);\n  return _objectSpread2(_objectSpread2(_objectSpread2({}, idState), state), {}, {\n    unstable_hasActiveWidget: hasActiveWidget,\n    unstable_setHasActiveWidget: setHasActiveWidget,\n    registerItem: useAction(function (item) {\n      if (isUnmountedRef.current) return;\n      dispatch({\n        type: \"registerItem\",\n        item: item\n      });\n    }),\n    unregisterItem: useAction(function (id) {\n      if (isUnmountedRef.current) return;\n      dispatch({\n        type: \"unregisterItem\",\n        id: id\n      });\n    }),\n    registerGroup: useAction(function (group) {\n      if (isUnmountedRef.current) return;\n      dispatch({\n        type: \"registerGroup\",\n        group: group\n      });\n    }),\n    unregisterGroup: useAction(function (id) {\n      if (isUnmountedRef.current) return;\n      dispatch({\n        type: \"unregisterGroup\",\n        id: id\n      });\n    }),\n    move: useAction(function (id) {\n      return dispatch({\n        type: \"move\",\n        id: id\n      });\n    }),\n    next: useAction(function (allTheWay) {\n      return dispatch({\n        type: \"next\",\n        allTheWay: allTheWay\n      });\n    }),\n    previous: useAction(function (allTheWay) {\n      return dispatch({\n        type: \"previous\",\n        allTheWay: allTheWay\n      });\n    }),\n    up: useAction(function (allTheWay) {\n      return dispatch({\n        type: \"up\",\n        allTheWay: allTheWay\n      });\n    }),\n    down: useAction(function (allTheWay) {\n      return dispatch({\n        type: \"down\",\n        allTheWay: allTheWay\n      });\n    }),\n    first: useAction(function () {\n      return dispatch({\n        type: \"first\"\n      });\n    }),\n    last: useAction(function () {\n      return dispatch({\n        type: \"last\"\n      });\n    }),\n    sort: useAction(function () {\n      return dispatch({\n        type: \"sort\"\n      });\n    }),\n    unstable_setVirtual: useAction(function (value) {\n      return dispatch({\n        type: \"setVirtual\",\n        virtual: value\n      });\n    }),\n    setRTL: useAction(function (value) {\n      return dispatch({\n        type: \"setRTL\",\n        rtl: value\n      });\n    }),\n    setOrientation: useAction(function (value) {\n      return dispatch({\n        type: \"setOrientation\",\n        orientation: value\n      });\n    }),\n    setCurrentId: useAction(function (value) {\n      return dispatch({\n        type: \"setCurrentId\",\n        currentId: value\n      });\n    }),\n    setLoop: useAction(function (value) {\n      return dispatch({\n        type: \"setLoop\",\n        loop: value\n      });\n    }),\n    setWrap: useAction(function (value) {\n      return dispatch({\n        type: \"setWrap\",\n        wrap: value\n      });\n    }),\n    setShift: useAction(function (value) {\n      return dispatch({\n        type: \"setShift\",\n        shift: value\n      });\n    }),\n    unstable_setIncludesBaseElement: useAction(function (value) {\n      return dispatch({\n        type: \"setIncludesBaseElement\",\n        includesBaseElement: value\n      });\n    }),\n    reset: useAction(function () {\n      return dispatch({\n        type: \"reset\"\n      });\n    })\n  });\n}\n\nexport { useCompositeState };\n"]},"metadata":{},"sourceType":"module"}