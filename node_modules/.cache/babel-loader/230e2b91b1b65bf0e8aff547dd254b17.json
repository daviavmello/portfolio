{"ast":null,"code":"import { _ as _objectWithoutPropertiesLoose, a as _objectSpread2 } from '../_rollupPluginBabelHelpers-1f0bf8c2.js';\nimport { useReducer, useCallback } from 'react';\nimport { useSealedState } from 'reakit-utils/useSealedState';\nimport '../Id/IdProvider.js';\nimport { unstable_useIdState } from '../Id/IdState.js';\n\nfunction reducer(state, action) {\n  var stops = state.stops,\n      currentId = state.currentId,\n      pastId = state.unstable_pastId,\n      moves = state.unstable_moves,\n      loop = state.loop;\n\n  switch (action.type) {\n    case \"register\":\n      {\n        var _id = action.id,\n            _ref = action.ref;\n\n        if (stops.length === 0) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            stops: [{\n              id: _id,\n              ref: _ref\n            }]\n          });\n        }\n\n        var index = stops.findIndex(function (stop) {\n          return stop.id === _id;\n        });\n\n        if (index >= 0) {\n          return state;\n        }\n\n        var indexToInsertAt = stops.findIndex(function (stop) {\n          if (!stop.ref.current || !_ref.current) return false; // Return true if the new rover element is located earlier in the DOM\n          // than stop's element, else false:\n\n          return Boolean(stop.ref.current.compareDocumentPosition(_ref.current) & Node.DOCUMENT_POSITION_PRECEDING);\n        }); // findIndex returns -1 when the new rover should be inserted\n        // at the end of stops (the compareDocumentPosition test\n        // always returns false in that case).\n\n        if (indexToInsertAt === -1) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            stops: [].concat(stops, [{\n              id: _id,\n              ref: _ref\n            }])\n          });\n        }\n\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          stops: [].concat(stops.slice(0, indexToInsertAt), [{\n            id: _id,\n            ref: _ref\n          }], stops.slice(indexToInsertAt))\n        });\n      }\n\n    case \"unregister\":\n      {\n        var _id2 = action.id;\n        var nextStops = stops.filter(function (stop) {\n          return stop.id !== _id2;\n        });\n\n        if (nextStops.length === stops.length) {\n          return state;\n        }\n\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          stops: nextStops,\n          unstable_pastId: pastId && pastId === _id2 ? null : pastId,\n          currentId: currentId && currentId === _id2 ? null : currentId\n        });\n      }\n\n    case \"move\":\n      {\n        var _id3 = action.id,\n            silent = action.silent;\n        var nextMoves = silent ? moves : moves + 1;\n\n        if (_id3 === null) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            currentId: null,\n            unstable_pastId: currentId,\n            unstable_moves: nextMoves\n          });\n        }\n\n        var _index = stops.findIndex(function (stop) {\n          return stop.id === _id3;\n        }); // Item doesn't exist, so we don't count a move\n\n\n        if (_index === -1) {\n          return state;\n        }\n\n        if (stops[_index].id === currentId) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            unstable_moves: nextMoves\n          });\n        }\n\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: stops[_index].id,\n          unstable_pastId: currentId,\n          unstable_moves: nextMoves\n        });\n      }\n\n    case \"next\":\n      {\n        if (currentId == null) {\n          return reducer(state, {\n            type: \"move\",\n            id: stops[0] && stops[0].id\n          });\n        }\n\n        var _index2 = stops.findIndex(function (stop) {\n          return stop.id === currentId;\n        }); // If loop is truthy, turns [0, currentId, 2, 3] into [currentId, 2, 3, 0]\n        // Otherwise turns into [currentId, 2, 3]\n\n\n        var reorderedStops = [].concat(stops.slice(_index2 + 1), loop ? stops.slice(0, _index2) : []);\n        var nextIndex = reorderedStops.findIndex(function (stop) {\n          return stop.id === currentId;\n        }) + 1;\n        return reducer(state, {\n          type: \"move\",\n          id: reorderedStops[nextIndex] && reorderedStops[nextIndex].id\n        });\n      }\n\n    case \"previous\":\n      {\n        var _reducer = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          stops: stops.slice().reverse()\n        }), {\n          type: \"next\"\n        }),\n            _ = _reducer.stops,\n            nextState = _objectWithoutPropertiesLoose(_reducer, [\"stops\"]);\n\n        return _objectSpread2(_objectSpread2({}, state), nextState);\n      }\n\n    case \"first\":\n      {\n        var stop = stops[0];\n        return reducer(state, {\n          type: \"move\",\n          id: stop && stop.id\n        });\n      }\n\n    case \"last\":\n      {\n        var _stop = stops[stops.length - 1];\n        return reducer(state, {\n          type: \"move\",\n          id: _stop && _stop.id\n        });\n      }\n\n    case \"reset\":\n      {\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: null,\n          unstable_pastId: null\n        });\n      }\n\n    case \"orientate\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        orientation: action.orientation\n      });\n\n    default:\n      throw new Error();\n  }\n}\n\nfunction useRoverState(initialState) {\n  if (initialState === void 0) {\n    initialState = {};\n  }\n\n  var _useSealedState = useSealedState(initialState),\n      orientation = _useSealedState.orientation,\n      _useSealedState$curre = _useSealedState.currentId,\n      currentId = _useSealedState$curre === void 0 ? null : _useSealedState$curre,\n      _useSealedState$loop = _useSealedState.loop,\n      loop = _useSealedState$loop === void 0 ? false : _useSealedState$loop,\n      sealed = _objectWithoutPropertiesLoose(_useSealedState, [\"orientation\", \"currentId\", \"loop\"]);\n\n  var _React$useReducer = useReducer(reducer, {\n    orientation: orientation,\n    stops: [],\n    currentId: currentId,\n    unstable_pastId: null,\n    unstable_moves: 0,\n    loop: loop\n  }),\n      state = _React$useReducer[0],\n      dispatch = _React$useReducer[1];\n\n  var idState = unstable_useIdState(sealed);\n  return _objectSpread2(_objectSpread2(_objectSpread2({}, idState), state), {}, {\n    register: useAction(function (id, ref) {\n      return dispatch({\n        type: \"register\",\n        id: id,\n        ref: ref\n      });\n    }),\n    unregister: useAction(function (id) {\n      return dispatch({\n        type: \"unregister\",\n        id: id\n      });\n    }),\n    move: useAction(function (id, silent) {\n      return dispatch({\n        type: \"move\",\n        id: id,\n        silent: silent\n      });\n    }),\n    next: useAction(function () {\n      return dispatch({\n        type: \"next\"\n      });\n    }),\n    previous: useAction(function () {\n      return dispatch({\n        type: \"previous\"\n      });\n    }),\n    first: useAction(function () {\n      return dispatch({\n        type: \"first\"\n      });\n    }),\n    last: useAction(function () {\n      return dispatch({\n        type: \"last\"\n      });\n    }),\n    unstable_reset: useAction(function () {\n      return dispatch({\n        type: \"reset\"\n      });\n    }),\n    unstable_orientate: useAction(function (o) {\n      return dispatch({\n        type: \"orientate\",\n        orientation: o\n      });\n    })\n  });\n}\n\nfunction useAction(fn) {\n  return useCallback(fn, []);\n}\n\nexport { useRoverState };","map":{"version":3,"sources":["/Users/davimello/Creative Cloud Files/Davi/code/portfolio/node_modules/reakit/es/Rover/RoverState.js"],"names":["_","_objectWithoutPropertiesLoose","a","_objectSpread2","useReducer","useCallback","useSealedState","unstable_useIdState","reducer","state","action","stops","currentId","pastId","unstable_pastId","moves","unstable_moves","loop","type","_id","id","_ref","ref","length","index","findIndex","stop","indexToInsertAt","current","Boolean","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","concat","slice","_id2","nextStops","filter","_id3","silent","nextMoves","_index","_index2","reorderedStops","nextIndex","_reducer","reverse","nextState","_stop","orientation","Error","useRoverState","initialState","_useSealedState","_useSealedState$curre","_useSealedState$loop","sealed","_React$useReducer","dispatch","idState","register","useAction","unregister","move","next","previous","first","last","unstable_reset","unstable_orientate","o","fn"],"mappings":"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","sourcesContent":["import { _ as _objectWithoutPropertiesLoose, a as _objectSpread2 } from '../_rollupPluginBabelHelpers-1f0bf8c2.js';\nimport { useReducer, useCallback } from 'react';\nimport { useSealedState } from 'reakit-utils/useSealedState';\nimport '../Id/IdProvider.js';\nimport { unstable_useIdState } from '../Id/IdState.js';\n\nfunction reducer(state, action) {\n  var stops = state.stops,\n      currentId = state.currentId,\n      pastId = state.unstable_pastId,\n      moves = state.unstable_moves,\n      loop = state.loop;\n\n  switch (action.type) {\n    case \"register\":\n      {\n        var _id = action.id,\n            _ref = action.ref;\n\n        if (stops.length === 0) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            stops: [{\n              id: _id,\n              ref: _ref\n            }]\n          });\n        }\n\n        var index = stops.findIndex(function (stop) {\n          return stop.id === _id;\n        });\n\n        if (index >= 0) {\n          return state;\n        }\n\n        var indexToInsertAt = stops.findIndex(function (stop) {\n          if (!stop.ref.current || !_ref.current) return false; // Return true if the new rover element is located earlier in the DOM\n          // than stop's element, else false:\n\n          return Boolean(stop.ref.current.compareDocumentPosition(_ref.current) & Node.DOCUMENT_POSITION_PRECEDING);\n        }); // findIndex returns -1 when the new rover should be inserted\n        // at the end of stops (the compareDocumentPosition test\n        // always returns false in that case).\n\n        if (indexToInsertAt === -1) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            stops: [].concat(stops, [{\n              id: _id,\n              ref: _ref\n            }])\n          });\n        }\n\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          stops: [].concat(stops.slice(0, indexToInsertAt), [{\n            id: _id,\n            ref: _ref\n          }], stops.slice(indexToInsertAt))\n        });\n      }\n\n    case \"unregister\":\n      {\n        var _id2 = action.id;\n        var nextStops = stops.filter(function (stop) {\n          return stop.id !== _id2;\n        });\n\n        if (nextStops.length === stops.length) {\n          return state;\n        }\n\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          stops: nextStops,\n          unstable_pastId: pastId && pastId === _id2 ? null : pastId,\n          currentId: currentId && currentId === _id2 ? null : currentId\n        });\n      }\n\n    case \"move\":\n      {\n        var _id3 = action.id,\n            silent = action.silent;\n        var nextMoves = silent ? moves : moves + 1;\n\n        if (_id3 === null) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            currentId: null,\n            unstable_pastId: currentId,\n            unstable_moves: nextMoves\n          });\n        }\n\n        var _index = stops.findIndex(function (stop) {\n          return stop.id === _id3;\n        }); // Item doesn't exist, so we don't count a move\n\n\n        if (_index === -1) {\n          return state;\n        }\n\n        if (stops[_index].id === currentId) {\n          return _objectSpread2(_objectSpread2({}, state), {}, {\n            unstable_moves: nextMoves\n          });\n        }\n\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: stops[_index].id,\n          unstable_pastId: currentId,\n          unstable_moves: nextMoves\n        });\n      }\n\n    case \"next\":\n      {\n        if (currentId == null) {\n          return reducer(state, {\n            type: \"move\",\n            id: stops[0] && stops[0].id\n          });\n        }\n\n        var _index2 = stops.findIndex(function (stop) {\n          return stop.id === currentId;\n        }); // If loop is truthy, turns [0, currentId, 2, 3] into [currentId, 2, 3, 0]\n        // Otherwise turns into [currentId, 2, 3]\n\n\n        var reorderedStops = [].concat(stops.slice(_index2 + 1), loop ? stops.slice(0, _index2) : []);\n        var nextIndex = reorderedStops.findIndex(function (stop) {\n          return stop.id === currentId;\n        }) + 1;\n        return reducer(state, {\n          type: \"move\",\n          id: reorderedStops[nextIndex] && reorderedStops[nextIndex].id\n        });\n      }\n\n    case \"previous\":\n      {\n        var _reducer = reducer(_objectSpread2(_objectSpread2({}, state), {}, {\n          stops: stops.slice().reverse()\n        }), {\n          type: \"next\"\n        }),\n            _ = _reducer.stops,\n            nextState = _objectWithoutPropertiesLoose(_reducer, [\"stops\"]);\n\n        return _objectSpread2(_objectSpread2({}, state), nextState);\n      }\n\n    case \"first\":\n      {\n        var stop = stops[0];\n        return reducer(state, {\n          type: \"move\",\n          id: stop && stop.id\n        });\n      }\n\n    case \"last\":\n      {\n        var _stop = stops[stops.length - 1];\n        return reducer(state, {\n          type: \"move\",\n          id: _stop && _stop.id\n        });\n      }\n\n    case \"reset\":\n      {\n        return _objectSpread2(_objectSpread2({}, state), {}, {\n          currentId: null,\n          unstable_pastId: null\n        });\n      }\n\n    case \"orientate\":\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        orientation: action.orientation\n      });\n\n    default:\n      throw new Error();\n  }\n}\n\nfunction useRoverState(initialState) {\n  if (initialState === void 0) {\n    initialState = {};\n  }\n\n  var _useSealedState = useSealedState(initialState),\n      orientation = _useSealedState.orientation,\n      _useSealedState$curre = _useSealedState.currentId,\n      currentId = _useSealedState$curre === void 0 ? null : _useSealedState$curre,\n      _useSealedState$loop = _useSealedState.loop,\n      loop = _useSealedState$loop === void 0 ? false : _useSealedState$loop,\n      sealed = _objectWithoutPropertiesLoose(_useSealedState, [\"orientation\", \"currentId\", \"loop\"]);\n\n  var _React$useReducer = useReducer(reducer, {\n    orientation: orientation,\n    stops: [],\n    currentId: currentId,\n    unstable_pastId: null,\n    unstable_moves: 0,\n    loop: loop\n  }),\n      state = _React$useReducer[0],\n      dispatch = _React$useReducer[1];\n\n  var idState = unstable_useIdState(sealed);\n  return _objectSpread2(_objectSpread2(_objectSpread2({}, idState), state), {}, {\n    register: useAction(function (id, ref) {\n      return dispatch({\n        type: \"register\",\n        id: id,\n        ref: ref\n      });\n    }),\n    unregister: useAction(function (id) {\n      return dispatch({\n        type: \"unregister\",\n        id: id\n      });\n    }),\n    move: useAction(function (id, silent) {\n      return dispatch({\n        type: \"move\",\n        id: id,\n        silent: silent\n      });\n    }),\n    next: useAction(function () {\n      return dispatch({\n        type: \"next\"\n      });\n    }),\n    previous: useAction(function () {\n      return dispatch({\n        type: \"previous\"\n      });\n    }),\n    first: useAction(function () {\n      return dispatch({\n        type: \"first\"\n      });\n    }),\n    last: useAction(function () {\n      return dispatch({\n        type: \"last\"\n      });\n    }),\n    unstable_reset: useAction(function () {\n      return dispatch({\n        type: \"reset\"\n      });\n    }),\n    unstable_orientate: useAction(function (o) {\n      return dispatch({\n        type: \"orientate\",\n        orientation: o\n      });\n    })\n  });\n}\n\nfunction useAction(fn) {\n  return useCallback(fn, []);\n}\n\nexport { useRoverState };\n"]},"metadata":{},"sourceType":"module"}